(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;$.Define($$,{IntelliFactory:{WebSharper:{Piglets:{Choose:{Stream:$.Class({Choice:function(V,W){var X,Y,_3=this;X=g.New2();Y={contents:false};this.subscriptions.contents=$.New(i,{$:1,$0:this.pStream.SubscribeImmediate(function(Z){var _0,_1,_2;if(Z.$==0){_0=Z.$0[1];_1=Z.$0[0];_2=X.ContainsKey(_1)?X.get_Item(_1):_0.view.call(null,W);_3.out.Trigger(_0.stream.get_Latest());if(Y.contents){V.Remove(0);}Y.contents=true;return V.Add(_2);}else{return null;}}),$1:_3.subscriptions.contents});return V.get_Container();},Chooser:function(_4){return this.chooser.view.call(null,_4);},Dispose:function(){var _5;_5=j.Get(this.subscriptions.contents);while(_5.MoveNext()){_5.get_Current().Dispose();}return k.iter(function(_6){return(l.KeyValue(_6))[1][1].Dispose();},this.choiceSubscriptions);},Subscribe:function(_7){return this.out.Subscribe(_7);},get_ChooserStream:function(){return this.chooser.stream;},get_Latest:function(){return this.out.get_Latest();}},{New:function(_8,_9,_){var ba;ba=$.New(this,e.New(_.get_Id()));ba.chooser=_8;ba.out=_;ba.pStream=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});ba.choiceSubscriptions=g.New2();ba.subscriptions={contents:h.ofArray([ba.chooser.stream.SubscribeImmediate(function(bb){return ba.pStream.Trigger(n.Map(function(bc){var bd,be,bf;if(ba.choiceSubscriptions.ContainsKey(bc)){bd=(ba.choiceSubscriptions.get_Item(bc))[0];}else{be=_9(bc);bf=ba.out;ba.choiceSubscriptions.set_Item(bc,[be,be.stream.Subscribe(function(bg){return bf.Trigger(bg);})]);bd=be;}return[bc,bd];},bb));})])};return ba;}})},ConcreteReader:$.Class({Subscribe:function(bg){return this.subscribe.call(null,bg);},get_Latest:function(){return this.latest.call(null,null);}},{New:function(bh,bi){var bj;bj=$.New(this,e.New((p.next())(null)));bj.latest=bh;bj.subscribe=bi;return bj;}}),ConcreteWriter:$.Class({Trigger:function(bk){return this.trigger.call(null,bk);}},{New:function(bl){return q.New1(function(bm){return bm.$==1?null:bl(bm.$0);});},New1:function(bn){var bo;bo=$.New(this,{});bo.trigger=bn;return bo;}}),ConstReader:$.Class({Subscribe:function(){return s.New(function(){});},get_Latest:function(){return this.x;}},{New:function(br){var bs;bs=$.New(this,e.New((p.next())(null)));bs.x=br;return bs;}}),Controls:{Attr:function(bt,bu,bv,bw){u.OnAfterRender(function(bx){var by;by=function(bz){return bz.$==0?bx["HtmlProvider@32"].SetAttribute(bx.Body,bu,bv(bz.$0)):null;};by(bt.get_Latest());bt.Subscribe(by);return;},bw);return bw;},AttrResult:function(bA,bB,bC,bD){u.OnAfterRender(function(bE){var bF;bF=function(bG){return bE["HtmlProvider@32"].SetAttribute(bE.Body,bB,bC(bG));};bF(bA.get_Latest());bA.Subscribe(bF);return;},bD);return bD;},Button:function(bH){var bI,bJ;bI=v.Button($.New(i,{$:0}));bJ=function(){return function(){return bH.Trigger($.New(n,{$:0,$0:null}));};};w.Events().OnClick(bJ,bI);return bI;},ButtonValidate:function(bM){var bN;bN=x.Button(bM);return x.EnableOnSuccess(bM.get_Input(),bN);},CheckBox:function(bO){var bP,bQ,bR;bP=(x.nextId())(null);bQ=v.Input(h.ofArray([v.Attr().NewAttr("type","checkbox"),v.Attr().NewAttr("id",bP)]));bR=bO.get_Latest();if(bR.$==0){bQ.Body.checked=bR.$0;}bO.Subscribe(function(bS){var bT;if(bS.$==1){return null;}else{bT=bS.$0;return!y.Equals(bQ.Body.checked,bT)?void(bQ.Body.checked=bT):null;}});bQ.Body.addEventListener("change",function(){return bO.Trigger($.New(n,{$:0,$0:bQ.Body.checked}));},true);return bQ;},Css:function(bV,bW,bX,bY){u.OnAfterRender(function(bZ){var b0;b0=function(b1){return b1.$==0?bZ["HtmlProvider@32"].SetCss(bZ.Body,bW,bX(b1.$0)):null;};b0(bV.get_Latest());bV.Subscribe(b0);return;},bY);return bY;},CssResult:function(b2,b3,b4,b5){u.OnAfterRender(function(b6){var b7;b7=function(b8){return b6["HtmlProvider@32"].SetCss(b6.Body,b3,b4(b8));};b7(b2.get_Latest());b2.Subscribe(b7);return;},b5);return b5;},EnableOnSuccess:function(b9,b_){u.OnAfterRender(function(b$){b$.Body.disabled=!b9.get_Latest().get_isSuccess();b9.Subscribe(function(ca){b$.Body.disabled=!ca.get_isSuccess();});return;},b_);return b_;},HtmlContainer:$.Class({Add:function(cb){return this.container.AppendI(cb);},MoveUp:function(cc){var cd,ce;cd=this.container.Body.childNodes[cc];ce=this.container.Body.childNodes[cc-1];this.container.Body.removeChild(cd);this.container.Body.insertBefore(cd,ce);return;},Remove:function(cf){this.container.Body.removeChild(this.container.Body.childNodes[cf]);},get_Container:function(){return this.container;}},{New:function(cg){var ch;ch=$.New(this,{});ch.container=cg;return ch;}}),IntInput:function(ci){return x.input("number",function(cj){return cj<<0;},function(ck){return $$.String(ck);},ci);},Link:function(cl){var cm;cm=v.A(h.ofArray([v.Attr().NewAttr("href","#")]));u.OnAfterRender(function(cn){return z(cn.Body).on("click",function(){cl.Trigger($.New(n,{$:0,$0:null}));return false;});},cm);return cm;},Radio:function(cp,cq){var cr,cs,ct,cD,cE;cr=(x.nextId())(null);cs=h.ofSeq(cq);ct=$.Tupled(function(cu){var cv,cw,cx,cy,cz,cB,cC;cv=cu[0];cw=cu[1];cx=(x.nextId())(null);cy=v.Input(h.ofArray([v.Attr().NewAttr("type","radio"),v.Attr().NewAttr("name",cr),v.Attr().NewAttr("id",cx)]));cz=function(cA){return cA.Body.checked?cp.Trigger($.New(n,{$:0,$0:cv})):null;};w.Events().OnChange(cz,cy);cB=cy;cC=h.ofArray([v.Attr().NewAttr("for",cx),v.Text(cw)]);return[cB,v.Span(h.ofArray([cB,v.Tags().NewTag("label",cC)]))];});cD=h.map(ct,cs);cE=v.Div(k.map($.Tupled(function(cF){return cF[1];}),cD));u.OnAfterRender(function(){var cH;cH=function(cI){var cJ;if(cI.$==1){return null;}else{cJ=cI.$0;return h.iter2($.Tupled(function(cK){var cL;cL=cK[0];return $.Tupled(function(cM){cM[0].Body.checked=y.Equals(cL,cJ);});}),cs,cD);}};cH(cp.get_Latest());cp.Subscribe(cH);return;},cE);return cE;},RenderChoice:function(cN,cO,cP){return cN.Choice(A.New(cP),cO);},RenderMany:function(cQ,cR,cS){return cQ.Render(A.New(cS),cR);},Select:function(cT,cU){var cV,cW,cX,c1,c2,c3,c5;cV=(x.nextId())(null);cW=B.ofSeq(cU);cX=$.Tupled(function(cY){var cZ,c0;cZ=cY[1];c0=(x.nextId())(null);return u.add(v.Tags().NewTag("option",h.ofArray([v.Attr().NewAttr("value",c0)])),h.ofArray([v.Text(cZ)]));});c1=B.map(cX,cW);c2=v.Select(c1);c3=function(c4){return c4.Body.selectedIndex>=0?cT.Trigger($.New(n,{$:0,$0:(C.GetArray(cW,c4.Body.selectedIndex))[0]})):null;};w.Events().OnChange(c3,c2);c5=c2;u.OnAfterRender(function(){cT.SubscribeImmediate(function(c7){var c8,c9,c$;if(c7.$==1){return null;}else{c8=c7.$0;c9=B.tryFindIndex($.Tupled(function(c_){return y.Equals(c8,c_[0]);}),cW);if(c9.$==0){return null;}else{c$=C.GetArray(c1,c9.$0);return c$["HtmlProvider@32"].SetAttribute(c$.Body,"selected","");}}});},c5);return c5;},Show:function(da,db,dc){return x.ShowResult(da,function(dd){return dd.$==1?k.empty():db(dd.$0);},dc);},ShowErrors:function(de,df,dg){return x.ShowResult(de,function(dh){return dh.$==1?df(h.map(function(di){return di.get_Message();},dh.$0)):k.empty();},dg);},ShowResult:function(dj,dk,dl){var dm;dm=j.Get(dk(dj.get_Latest()));while(dm.MoveNext()){dl.AppendI(dm.get_Current());}dj.Subscribe(function(dn){var _do;dl["HtmlProvider@32"].Clear(dl.Body);_do=j.Get(dk(dn));while(_do.MoveNext()){dl.AppendI(_do.get_Current());}return;});return dl;},ShowString:function(dp,dq,dr){return x.Show(dp,function(ds){return h.ofArray([v.Text(dq(ds))]);},dr);},Submit:function(dt){var du,dv;du=v.Input(h.ofArray([v.Attr().NewAttr("type","submit")]));dv=function(){return function(){return dt.Trigger($.New(n,{$:0,$0:null}));};};w.Events().OnClick(dv,du);return du;},SubmitValidate:function(dy){var dz;dz=x.Submit(dy);return x.EnableOnSuccess(dy.get_Input(),dz);},TextArea:function(dA){var dB,dC,dF;dB=v.TextArea($.New(i,{$:0}));dC=dA.get_Latest();if(dC.$==0){dB.set_Value(dC.$0);}dA.Subscribe(function(dD){var dE;if(dD.$==1){return null;}else{dE=dD.$0;return dB.get_Value()!==dE?dB.set_Value(dE):null;}});dF=function(){return dA.Trigger($.New(n,{$:0,$0:dB.get_Value()}));};dB.Body.addEventListener("keyup",dF,true);dB.Body.addEventListener("change",dF,true);return dB;},WithLabel:function(dH,dI){var dJ,dK;dJ=(x.nextId())(null);dK=h.ofArray([v.Attr().NewAttr("for",dJ),v.Text(dH)]);return v.Span(h.ofArray([v.Tags().NewTag("label",dK),u.add(dI,h.ofArray([v.Attr().NewAttr("id",dJ)]))]));},WithLabelAfter:function(dL,dM){var dN,dO;dN=(x.nextId())(null);dO=h.ofArray([v.Attr().NewAttr("for",dN),v.Text(dL)]);return v.Span(h.ofArray([u.add(dM,h.ofArray([v.Attr().NewAttr("id",dN)])),v.Tags().NewTag("label",dO)]));},input:function(dP,dQ,dR,dS){var dT,dU,dX;dT=v.Input(h.ofArray([v.Attr().NewAttr("type",dP)]));dU=dS.get_Latest();if(dU.$==0){dT.set_Value(dR(dU.$0));}dS.Subscribe(function(dV){var dW;if(dV.$==1){return null;}else{dW=dR(dV.$0);return dT.get_Value()!==dW?dT.set_Value(dW):null;}});dX=function(){var dZ;dZ=$.New(n,{$:0,$0:dQ(dT.get_Value())});return!y.Equals(dZ,dS.get_Latest())?dS.Trigger(dZ):null;};dT.Body.addEventListener("keyup",dX,true);dT.Body.addEventListener("change",dX,true);return dT;},nextId:$.Field(function(){var d0;d0={contents:0};return function(){l.Increment(d0);return"pl__"+$$.String(d0.contents);};})},Disposable:$.Class({Dispose:function(){return this.dispose.call(null,null);}},{New:function(d2){var d3;d3=$.New(this,{});d3.dispose=d2;return d3;}}),ErrorMessage:$.Class({get_Message:function(){return this.message;},get_Source:function(){return this.source;}},{Create:function(d4,d5){return D.New(d4,d5.get_Id());},New:function(d6,d7){var d8;d8=$.New(this,{});d8.message=d6;d8.source=d7;return d8;}}),Id:{next:$.Field(function(){var d9;d9={contents:0};return function(){l.Increment(d9);return d9.contents;};})},Many:{Operations:$.Class({get_Delete:function(){return q.New(this["delete"]);},get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;}},{New:function(d$,ea,eb){var ec;ec=$.New(this,{});ec["delete"]=d$;ec.moveUp=ea;ec.moveDown=eb;return ec;}}),Stream:$.Class({AddRender:function(ed){return this.adder.view.call(null,ed);},Render:function(ee,ef){var eg,ej=this,eJ;eg=function(eh){var ei,el,eo,er,et,ev,ex,ez,eA,eB,eD,eE,eF,eG;ei=ej.p.call(null,eh);ej.streams.Add(ei.stream);ei.stream.SubscribeImmediate(function(){return ej.update();});el=function(){return k.findIndex(function(en){return en.get_Id()===ei.stream.get_Id();},ej.streams);};eo=function(ep){var eq;if(ep>0?ep<ej.streams.get_Count():false){eq=ej.streams.get_Item(ep);ej.streams.set_Item(ep,ej.streams.get_Item(ep-1));ej.streams.set_Item(ep-1,eq);ee.MoveUp(ep);return ej.update();}else{return null;}};er=function(){return eo(el(null)+1);};et=function(){return eo(el(null));};ev=function(){return el(null)>0?$.New(n,{$:0,$0:null}):$.New(n,{$:1,$0:$.New(i,{$:0})});};ex=function(){return el(null)<ej.streams.get_Count()-1?$.New(n,{$:0,$0:null}):$.New(n,{$:1,$0:$.New(i,{$:0})});};ez=m.New(ev(null),{$:0});eA=m.New(ex(null),{$:0});eB=ej.out.Subscribe(function(){ez.Trigger(ev(null));return eA.Trigger(ex(null));});eD=G.New(ez,false);eE=G.New(eA,false);eF=eD.Subscribe(n.Iter(et));eG=eE.Subscribe(n.Iter(er));return ee.Add(ei.view.call(null,ef(H.New(function(){var eI;eI=el(null);ej.streams.RemoveAt(eI);ee.Remove(eI);eB.Dispose();eF.Dispose();eG.Dispose();return ej.update();},eD,eE))));};eJ=ej.out.get_Latest();if(eJ.$==0){B.iter(eg,eJ.$0);}ej.adder.stream.Subscribe(function(eK){return eK.$==0?eg(eK.$0):null;});return ee.get_Container();},Subscribe:function(eL){return this.out.Subscribe(eL);},get_Add:function(){return this.adder.stream;},get_Latest:function(){return this.out.get_Latest();},update:function(){var eM;eM=this.out;return eM.Trigger(n.Map(function(eN){return B.ofSeq(h.rev(eN));},k.fold(function(eO){return function(eP){var eQ;eQ=[eO,eP.get_Latest()];return eQ[0].$==1?eQ[1].$==1?$.New(n,{$:1,$0:h.append(eQ[1].$0,eQ[0].$0)}):$.New(n,{$:1,$0:eQ[0].$0}):eQ[1].$==1?$.New(n,{$:1,$0:eQ[1].$0}):$.New(n,{$:0,$0:$.New(i,{$:1,$0:eQ[1].$0,$1:eQ[0].$0})});};},$.New(n,{$:0,$0:$.New(i,{$:0})}),this.streams)));}},{New:function(eR,eS,eT){var eU;eU=$.New(this,e.New(eS.get_Id()));eU.p=eR;eU.out=eS;eU.adder=eT;eU.streams=J.New1();return eU;}}),UnitStream:$.Class({get_Add:function(){return this.submitStream;}},{New:function(eV,eW,eX,eY){var eZ,e0,e1,e2;eZ=$.New(this,F.New(eV,eW,eX));e0=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});e1=eX.get_Stream();e2=function(e3){return e1.Trigger(e3);};e0.Subscribe(function(e4){return e4.$==0?e2($.New(n,{$:0,$0:eY})):e2($.New(n,{$:1,$0:e4.$0}));});eZ.submitStream=e0;return eZ;}})},Pervasives:{op_LessMultiplyGreater:function(e5,e6){var e7,e8;e7=e5.view;e8=e6.view;return $.New(L,{stream:M.Ap(e5.stream,e6.stream),view:function(e9){return e8(e7(e9));}});},op_LessMultiplyQmarkGreater:function(e_,e$){var fa,fb;fa=e_.view;fb=e$.view;return $.New(L,{stream:M.ApJoin(e_.stream,e$.stream),view:function(fc){return fb(fa(fc));}});}},Piglet:$.Class({get_Stream:function(){return this.stream;}}),Piglet1:{Builder:$.Class({Bind:function(fd,fe){return N.Choose(fd,fe);},Return:function(ff){return N.Return(ff);},ReturnFrom:function(fg){return fg;},Yield:function(fh){return N.Yield(fh);},YieldFrom:function(fi){return fi;},Zero:function(){return N.ReturnFailure();}}),Choose:function(fj,fk){var fl,fm;fl=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});fm=d.New(fj,fk,fl);return $.New(L,{stream:fl,view:function(fn){return fn(fm);}});},Confirm:function(fo,fp,fq){var fr,fs,fv;fr=N.Yield(fo);fs=O.op_LessMultiplyGreater(O.op_LessMultiplyGreater(N.Return(function(ft){return function(fu){return[ft,fu];};}),fp(N.Yield(fo))),fr);fv=P["Is'"]($.Tupled(function(fw){return y.Equals(fw[0],fw[1]);}),D.Create(fq,fr.get_Stream()),fs);return N.MapViewArgs(function(fx){return function(fy){return[fx,fy];};},N.Map($.Tupled(function(fz){return fz[0];}),fv));},FlushErrors:function(fA){return N.MapResult(function(fB){return fB.$==1?$.New(n,{$:1,$0:$.New(i,{$:0})}):fB;},fA);},Many:function(fC,fD){return N.ManyInit([fC],fC,fD);},ManyInit:function(fE,fF,fG){var fH,fI;fH=m.New($.New(n,{$:0,$0:fE}),{$:0});fI=K.New(fG,fH,fG(fF),fF);return $.New(L,{stream:fH,view:function(fJ){return fJ(fI);}});},ManyPiglet:function(fK,fL,fM){var fN,fO;fN=m.New($.New(n,{$:0,$0:fK}),{$:0});fO=F.New(fM,fN,fL);return $.New(L,{stream:fN,view:function(fP){return fP(fO);}});},Map:function(fQ,fR){return N.MapResult(function(fS){return fS.$==0?$.New(n,{$:0,$0:fQ(fS.$0)}):$.New(n,{$:1,$0:fS.$0});},fR);},MapAsync:function(fT,fU){return N.MapAsyncResult(function(fV){var fW;if(fV.$==0){fW=fV.$0;return Q.Delay(function(){return Q.Bind(fT(fW),function(fY){return Q.Return($.New(n,{$:0,$0:fY}));});});}else{return Q.Return($.New(n,{$:1,$0:fV.$0}));}},fU);},MapAsyncResult:function(fZ,f0){var f1;f1=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});f0.stream.Subscribe(function(f2){return Q.Start(Q.Delay(function(){return Q.Bind(fZ(f2),function(f4){return Q.Return(f1.Trigger(f4));});}),{$:0});});Q.Start(Q.Delay(function(){return Q.Bind(fZ(f0.stream.get_Latest()),function(f6){return Q.Return(f1.Trigger(f6));});}),{$:0});return $.New(L,{stream:f1,view:f0.view});},MapResult:function(f7,f8){var f9;f9=m.New(f7(f8.stream.get_Latest()),{$:0});f8.stream.Subscribe(function(f_){return f9.Trigger(f7(f_));});return $.New(L,{stream:f9,view:f8.view});},MapResultWithWriter:function(f$,ga){var gb;gb=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});ga.stream.SubscribeImmediate(f$(gb));return $.New(L,{stream:gb,view:ga.view});},MapToAsyncResult:function(gc,gd){return N.MapAsyncResult(function(ge){return ge.$==0?gc(ge.$0):Q.Return($.New(n,{$:1,$0:ge.$0}));},gd);},MapToResult:function(gf,gg){return N.MapResult(function(gh){return gh.$==0?gf(gh.$0):$.New(n,{$:1,$0:gh.$0});},gg);},MapViewArgs:function(gi,gj){var gk;gk=gj.view;return $.New(L,{stream:gj.stream,view:function(gl){return gl(gk(gi));}});},MapWithWriter:function(gm,gn){return N.MapResultWithWriter(function(go){return function(gp){var gq;if(gp.$==0){gq=gp.$0;return(gm(go))(gq);}else{return go.Trigger($.New(n,{$:1,$0:gp.$0}));}};},gn);},Render:function(gr,gs){return gs.view.call(null,gr);},Return:function(gt){return $.New(L,{stream:m.New($.New(n,{$:0,$0:gt}),{$:0}),view:function(gu){return gu;}});},ReturnFailure:function(){return $.New(L,{stream:m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0}),view:function(gv){return gv;}});},Run:function(gw,gx){return N.RunResult(n.Iter(gw),gx);},RunResult:function(gy,gz){gz.stream.Subscribe(gy);return gz;},TransmitReader:function(gA){var gB,gC;gB=gA.view;gC=gA.stream;return $.New(L,{stream:gA.stream,view:function(gD){return(gB(gD))(gC);}});},TransmitReaderMap:function(gE,gF){var gG,gH;gG=gF.view;gH=e.Map(gE,gF.stream);return $.New(L,{stream:gF.stream,view:function(gI){return(gG(gI))(gH);}});},TransmitReaderMapResult:function(gJ,gK){var gL,gM;gL=gK.view;gM=e.MapResult(gJ,gK.stream);return $.New(L,{stream:gK.stream,view:function(gN){return(gL(gN))(gM);}});},TransmitReaderMapToResult:function(gO,gP){var gQ,gR;gQ=gP.view;gR=e.MapToResult(gO,gP.stream);return $.New(L,{stream:gP.stream,view:function(gS){return(gQ(gS))(gR);}});},TransmitStream:function(gT){var gU,gV;gU=gT.view;gV=gT.stream;return $.New(L,{stream:gT.stream,view:function(gW){return(gU(gW))(gV);}});},TransmitWriter:function(gX){var gY,gZ;gY=gX.view;gZ=gX.stream;return $.New(L,{stream:gX.stream,view:function(g0){return(gY(g0))(gZ);}});},Validation:{Is:function(g1,g2,g3){var g4;g4=m.New(g3.stream.get_Latest(),{$:1,$0:g3.stream.get_Id()});g3.stream.Subscribe(function(g5){return g5.$==0?g1(g5.$0)?g4.Trigger($.New(n,{$:0,$0:g5.$0})):g4.Trigger($.New(n,{$:1,$0:h.ofArray([D.New(g2,g4.get_Id())])})):g4.Trigger($.New(n,{$:1,$0:g5.$0}));});return $.New(L,{stream:g4,view:g3.view});},"Is'":function(g6,g7,g8){var g9;g9=m.New(g8.stream.get_Latest(),{$:1,$0:g8.stream.get_Id()});g8.stream.Subscribe(function(g_){return g_.$==0?g6(g_.$0)?g9.Trigger($.New(n,{$:0,$0:g_.$0})):g9.Trigger($.New(n,{$:1,$0:h.ofArray([g7])})):g9.Trigger($.New(n,{$:1,$0:g_.$0}));});return $.New(L,{stream:g9,view:g8.view});},Match:function(g$){var ha;ha=new R(g$);return function(hb){return ha.test(hb);};},NotEmpty:function(hc){return hc!=="";}},WithSubmit:function(hd){var he,hf;he=G.New(hd.stream,false);hf=hd.view;return $.New(L,{stream:he.get_Output(),view:function(hg){return(hf(hg))(he);}});},WithSubmitClearError:function(hh){var hi,hj;hi=G.New(hh.stream,true);hj=hh.view;return $.New(L,{stream:hi.get_Output(),view:function(hk){return(hj(hk))(hi);}});},Yield:function(hl){var hm;hm=m.New($.New(n,{$:0,$0:hl}),{$:0});return $.New(L,{stream:hm,view:function(hn){return hn(hm);}});},YieldFailure:function(){var ho;ho=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});return $.New(L,{stream:ho,view:function(hp){return hp(ho);}});},YieldOption:function(hq,hr){var hs,hu;hs=function(ht){return ht.$==1?ht.$0:hr;};hu=function(hv){return y.Equals(hv,hr)?{$:0}:{$:1,$0:hv};};return N.MapViewArgs(function(hw){return M.Map(hs,hu,hw);},N.Yield(hq));}},Reader:$.Class({SubscribeImmediate:function(hx){hx(this.get_Latest());return this.Subscribe(hx);},Through:function(hy){var hz,hD=this;hz=m.New(this.get_Latest(),{$:0});hy.Subscribe(function(hA){var hB,hC;if(hA.$==1){hB=hA.$0;hC=[hD.get_Latest(),h.filter(function(hE){return hE.get_Source()===hD.get_Id();},hB)];return hC[1].$==0?hz.Trigger(hD.get_Latest()):hC[0].$==1?hz.Trigger($.New(n,{$:1,$0:h.append(hC[0].$0,hC[1])})):hz.Trigger($.New(n,{$:1,$0:hC[1]}));}else{return hz.Trigger(hD.get_Latest());}});return hz;},get_Id:function(){return this.id;}},{Const:function(hF){return r.New($.New(n,{$:0,$0:hF}));},ConstResult:function(hG){return r.New(hG);},Map:function(hH,hI){return e.MapResult(function(hJ){return n.Map(hH,hJ);},hI);},Map2:function(hK,hL,hM){return e.MapResult2(function(hN){return function(hO){return n.Map2(hK,hN,hO);};},hL,hM);},MapResult:function(hP,hQ){var hR;hR=m.New(hP(hQ.get_Latest()),{$:0});hQ.Subscribe(function(hS){return hR.Trigger(hP(hS));});return hR;},MapResult2:function(hT,hU,hV){var hW;hW=m.New((hT(hU.get_Latest()))(hV.get_Latest()),{$:0});hU.Subscribe(function(hX){return hW.Trigger((hT(hX))(hV.get_Latest()));});hV.Subscribe(function(hY){return hW.Trigger((hT(hU.get_Latest()))(hY));});return hW;},MapToResult:function(hZ,h0){return e.MapResult(n.Bind(hZ),h0);},New:function(h1){var h2;h2=$.New(this,{});h2.id=h1;return h2;}}),Result:$.Class({get_isSuccess:function(){return this.$==1?false:true;}},{Ap:function(h3,h4){var h5;h5=[h3,h4];return h5[0].$==1?h5[1].$==1?$.New(n,{$:1,$0:h.append(h5[0].$0,h5[1].$0)}):$.New(n,{$:1,$0:h5[0].$0}):h5[1].$==1?$.New(n,{$:1,$0:h5[1].$0}):$.New(n,{$:0,$0:h5[0].$0.call(null,h5[1].$0)});},Bind:function(h6){return function(h7){return h7.$==1?$.New(n,{$:1,$0:h7.$0}):h6(h7.$0);};},Failwith:function(h8){return $.New(n,{$:1,$0:h.ofArray([D.New(h8,0)])});},Iter:function(h9){return function(h_){return h_.$==1?null:h9(h_.$0);};},Join:function(h$){return h$.$==0?h$.$0.$==0?$.New(n,{$:0,$0:h$.$0.$0}):$.New(n,{$:1,$0:h$.$0.$0}):$.New(n,{$:1,$0:h$.$0});},Map:function(ia,ib){return ib.$==1?$.New(n,{$:1,$0:ib.$0}):$.New(n,{$:0,$0:ia(ib.$0)});},Map2:function(ic,id,ie){var _if,ig;_if=[id,ie];if(_if[0].$==1){return _if[1].$==1?$.New(n,{$:1,$0:h.append(_if[0].$0,_if[1].$0)}):$.New(n,{$:1,$0:_if[0].$0});}else{if(_if[1].$==1){return $.New(n,{$:1,$0:_if[1].$0});}else{ig=_if[1].$0;return $.New(n,{$:0,$0:(ic(_if[0].$0))(ig)});}}}}),Stream:$.Class({Subscribe:function(ih){return S.subscribeTo(this.s,ih);},Trigger:function(ii){return this.s.Trigger(ii);},Trigger1:function(ij){return this.Trigger(ij);},Write:function(ik){var im=this;return q.New1(function(il){return il.$==0?im.Trigger($.New(n,{$:0,$0:ik})):im.Trigger($.New(n,{$:1,$0:il.$0}));});},get_Latest:function(){return this.s.Latest.contents.$0;}},{New:function(_in,io){return $.New(this,m.New1(U.New(_in),io));},New1:function(ip,iq){var ir;ir=$.New(this,e.New(iq.$==0?(p.next())(null):iq.$0));ir.s=ip;return ir;}}),Stream1:{Ap:function(is,it){var iu;iu=m.New(n.Ap(is.get_Latest(),it.get_Latest()),{$:0});is.Subscribe(function(iv){return iu.Trigger(n.Ap(iv,it.get_Latest()));});it.Subscribe(function(iw){return iu.Trigger(n.Ap(is.get_Latest(),iw));});return iu;},ApJoin:function(ix,iy){var iz;iz=m.New(n.Ap(ix.get_Latest(),n.Join(iy.get_Latest())),{$:0});ix.Subscribe(function(iA){return iz.Trigger(n.Ap(iA,n.Join(iy.get_Latest())));});iy.Subscribe(function(iB){return iz.Trigger(n.Ap(ix.get_Latest(),n.Join(iB)));});return iz;},Map:function(iC,iD,iE){var iF,iG,iH;iF=m.New(n.Map(iC,iE.get_Latest()),{$:1,$0:iE.get_Id()});iG={contents:iE.get_Latest()};iH={contents:iF.get_Latest()};iE.Subscribe(function(iI){if(iG.contents!==iI){iH.contents=n.Map(iC,iI);return iF.Trigger(iH.contents);}else{return null;}});iF.Subscribe(function(iJ){if(iH.contents!==iJ){iG.contents=n.Map(iD,iJ);return iE.Trigger(iG.contents);}else{return null;}});return iF;}},Submitter:$.Class({Subscribe:function(iK){return this.output.Subscribe(iK);},Trigger:function(){return this.writer.Trigger($.New(n,{$:0,$0:null}));},Trigger1:function(iL){return this.writer.Trigger(iL);},get_Input:function(){return this.input;},get_Latest:function(){return this.output.get_Latest();},get_Output:function(){return this.output;}},{New:function(iM,iN){var iO;iO=$.New(this,e.New((p.next())(null)));iO.input=iM;iO.output=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});iO.writer=q.New1(function(iP){var iQ;iQ=[iP,iO.input.get_Latest()];return iQ[0].$==0?iQ[1].$==0?iO.output.Trigger($.New(n,{$:0,$0:iQ[1].$0})):iO.output.Trigger($.New(n,{$:1,$0:iQ[1].$0})):iQ[1].$==0?iO.output.Trigger($.New(n,{$:1,$0:iQ[0].$0})):iO.output.Trigger($.New(n,{$:1,$0:h.append(iQ[0].$0,iQ[1].$0)}));});if(iN){iO.input.Subscribe(function(){var iS;iS=iO.output.get_Latest();return iS.$==1?iS.$0.$==0?null:iO.output.Trigger($.New(n,{$:1,$0:$.New(i,{$:0})})):iO.output.Trigger($.New(n,{$:1,$0:$.New(i,{$:0})}));});}return iO;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Choose);d=$.Safe(c.Stream);e=$.Safe(b.Reader);f=$.Safe(a.Collections);g=$.Safe(f.Dictionary);h=$.Safe(a.List);i=$.Safe(h.T);j=$.Safe(a.Enumerator);k=$.Safe(a.Seq);l=$.Safe(a.Operators);m=$.Safe(b.Stream);n=$.Safe(b.Result);o=$.Safe(b.ConcreteReader);p=$.Safe(b.Id);q=$.Safe(b.ConcreteWriter);r=$.Safe(b.ConstReader);s=$.Safe(b.Disposable);t=$.Safe(a.Html);u=$.Safe(t.Operators);v=$.Safe(t.Default);w=$.Safe(t.EventsPervasives);x=$.Safe(b.Controls);y=$.Safe(a.Unchecked);z=$.Safe($$.jQuery);A=$.Safe(x.HtmlContainer);B=$.Safe(a.Arrays);C=$.Safe(a.IntrinsicFunctionProxy);D=$.Safe(b.ErrorMessage);E=$.Safe(b.Many);F=$.Safe(E.Stream);G=$.Safe(b.Submitter);H=$.Safe(E.Operations);I=$.Safe(f.ResizeArray);J=$.Safe(I.ResizeArrayProxy);K=$.Safe(E.UnitStream);L=$.Safe(b.Piglet);M=$.Safe(b.Stream1);N=$.Safe(b.Piglet1);O=$.Safe(b.Pervasives);P=$.Safe(N.Validation);Q=$.Safe(a.Concurrency);R=$.Safe($$.RegExp);S=$.Safe(a.Util);T=$.Safe($$.IntelliFactory.Reactive);return U=$.Safe(T.HotStream);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(o,e);$.Inherit(r,e);$.Inherit(F,e);$.Inherit(F,e);$.Inherit(K,F);$.Inherit(m,e);$.Inherit(G,e);p.next();x.nextId();return;});}());
