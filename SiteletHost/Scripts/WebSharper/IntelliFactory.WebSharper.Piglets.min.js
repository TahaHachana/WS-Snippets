(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R;$.Define($$,{IntelliFactory:{WebSharper:{Piglets:{Choose:{Stream:$.Class({Choice:function(S,T){var U,V,_0=this;U=g.New21();V={contents:false};this.subscriptions.contents=$.New(i,{$:1,$0:this.pStream.SubscribeImmediate(function(W){var X,Y,Z;if(W.$==0){X=W.$0[1];Y=W.$0[0];Z=U.ContainsKey(Y)?U.get_Item(Y):X.view.call(null,T);_0.out.Trigger(X.stream.get_Latest());if(V.contents){S.Remove(0);}V.contents=true;return S.Add(Z);}else{return null;}}),$1:_0.subscriptions.contents});return S.get_Container();},Chooser:function(_1){return this.chooser.view.call(null,_1);},Dispose:function(){var _2;_2=j.Get(this.subscriptions.contents);while(_2.MoveNext()){_2.get_Current().Dispose();}return k.iter(function(_3){return(l.KeyValue(_3))[1][1].Dispose();},this.choiceSubscriptions);},Subscribe:function(_4){return this.out.Subscribe(_4);},get_ChooserStream:function(){return this.chooser.stream;},get_Latest:function(){return this.out.get_Latest();}},{New:function(_5,_6,_7){var _8;_8=$.New(this,e.New(_7.get_Id()));_8.chooser=_5;_8.out=_7;_8.pStream=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});_8.choiceSubscriptions=g.New21();_8.subscriptions={contents:h.ofArray([_8.chooser.stream.SubscribeImmediate(function(_9){return _8.pStream.Trigger(n.Map(function(_){var ba,bb,bc;if(_8.choiceSubscriptions.ContainsKey(_)){ba=(_8.choiceSubscriptions.get_Item(_))[0];}else{bb=_6(_);bc=_8.out;_8.choiceSubscriptions.set_Item(_,[bb,bb.stream.Subscribe(function(bd){return bc.Trigger(bd);})]);ba=bb;}return[_,ba];},_9));})])};return _8;}})},ConcreteReader:$.Class({Subscribe:function(bd){return this.subscribe.call(null,bd);},get_Latest:function(){return this.latest.call(null,null);}},{New:function(be,bf){var bg;bg=$.New(this,e.New((p.next())(null)));bg.latest=be;bg.subscribe=bf;return bg;}}),ConcreteWriter:$.Class({Trigger:function(bh){return this.trigger.call(null,bh);}},{New:function(bi){return q.New1(function(bj){return bj.$==1?null:bi(bj.$0);});},New1:function(bk){var bl;bl=$.New(this,{});bl.trigger=bk;return bl;}}),Controls:{Attr:function(bm,bn,bo,bp){s.OnAfterRender(function(bq){var br;br=function(bs){return bs.$==0?bq["HtmlProvider@32"].SetAttribute(bq.Body,bn,bo(bs.$0)):null;};br(bm.get_Latest());bm.Subscribe(br);return;},bp);return bp;},AttrResult:function(bt,bu,bv,bw){s.OnAfterRender(function(bx){var by;by=function(bz){return bx["HtmlProvider@32"].SetAttribute(bx.Body,bu,bv(bz));};by(bt.get_Latest());bt.Subscribe(by);return;},bw);return bw;},Button:function(bA){var bB,bC;bB=t.Button($.New(i,{$:0}));bC=function(){return function(){return bA.Trigger($.New(n,{$:0,$0:null}));};};u.Events().OnClick(bC,bB);return bB;},ButtonValidate:function(bF){var bG;bG=v.Button(bF);return v.EnableOnSuccess(bF.get_Input(),bG);},CheckBox:function(bH){var bI,bJ,bK;bI=(v.nextId())(null);bJ=t.Input(h.ofArray([t.Attr().NewAttr("type","checkbox"),t.Attr().NewAttr("id",bI)]));bK=bH.get_Latest();if(bK.$==0){bJ.Body.checked=bK.$0;}bH.Subscribe(function(bL){var bM;if(bL.$==1){return null;}else{bM=bL.$0;return!w.Equals(bJ.Body.checked,bM)?void(bJ.Body.checked=bM):null;}});bJ.Body.addEventListener("change",function(){return bH.Trigger($.New(n,{$:0,$0:bJ.Body.checked}));},true);return bJ;},Css:function(bO,bP,bQ,bR){s.OnAfterRender(function(bS){var bT;bT=function(bU){return bU.$==0?bS["HtmlProvider@32"].SetCss(bS.Body,bP,bQ(bU.$0)):null;};bT(bO.get_Latest());bO.Subscribe(bT);return;},bR);return bR;},CssResult:function(bV,bW,bX,bY){s.OnAfterRender(function(bZ){var b0;b0=function(b1){return bZ["HtmlProvider@32"].SetCss(bZ.Body,bW,bX(b1));};b0(bV.get_Latest());bV.Subscribe(b0);return;},bY);return bY;},EnableOnSuccess:function(b2,b3){s.OnAfterRender(function(b4){b4.Body.disabled=!b2.get_Latest().get_isSuccess();b2.Subscribe(function(b5){b4.Body.disabled=!b5.get_isSuccess();});return;},b3);return b3;},HtmlContainer:$.Class({Add:function(b6){return this.container.AppendI(b6);},MoveUp:function(b7){var b8,b9;b8=this.container.Body.childNodes[b7];b9=this.container.Body.childNodes[b7-1];this.container.Body.removeChild(b8);this.container.Body.insertBefore(b8,b9);return;},Remove:function(b_){this.container.Body.removeChild(this.container.Body.childNodes[b_]);},get_Container:function(){return this.container;}},{New:function(b$){var ca;ca=$.New(this,{});ca.container=b$;return ca;}}),IntInput:function(cb){return v.input("number",function(cc){return cc<<0;},function(cd){return $$.String(cd);},cb);},Link:function(ce){var cf;cf=t.A(h.ofArray([t.Attr().NewAttr("href","#")]));s.OnAfterRender(function(cg){return x(cg.Body).on("click",function(){ce.Trigger($.New(n,{$:0,$0:null}));return false;});},cf);return cf;},Radio:function(ci,cj){var ck,cl,cm,cw,cx;ck=(v.nextId())(null);cl=h.ofSeq(cj);cm=$.Tupled(function(cn){var co,cp,cq,cr,cs,cu,cv;co=cn[0];cp=cn[1];cq=(v.nextId())(null);cr=t.Input(h.ofArray([t.Attr().NewAttr("type","radio"),t.Attr().NewAttr("name",ck),t.Attr().NewAttr("id",cq)]));cs=function(ct){return ct.Body.checked?ci.Trigger($.New(n,{$:0,$0:co})):null;};u.Events().OnChange(cs,cr);cu=cr;cv=h.ofArray([t.Attr().NewAttr("for",cq),t.Text(cp)]);return[cu,t.Span(h.ofArray([cu,t.Tags().NewTag("label",cv)]))];});cw=h.map(cm,cl);cx=t.Div(k.map($.Tupled(function(cy){return cy[1];}),cw));s.OnAfterRender(function(){var cA;cA=function(cB){var cC;if(cB.$==1){return null;}else{cC=cB.$0;return h.iter2($.Tupled(function(cD){var cE;cE=cD[0];return $.Tupled(function(cF){cF[0].Body.checked=w.Equals(cE,cC);});}),cl,cw);}};cA(ci.get_Latest());ci.Subscribe(cA);return;},cx);return cx;},RenderChoice:function(cG,cH,cI){return cG.Choice(y.New(cI),cH);},RenderMany:function(cJ,cK,cL){return cJ.Render(y.New(cL),cK);},Select:function(cM,cN){var cO,cP,cQ,cU,cV,cW,cY;cO=(v.nextId())(null);cP=z.ofSeq(cN);cQ=$.Tupled(function(cR){var cS,cT;cS=cR[1];cT=(v.nextId())(null);return s.add(t.Tags().NewTag("option",h.ofArray([t.Attr().NewAttr("value",cT)])),h.ofArray([t.Text(cS)]));});cU=z.map(cQ,cP);cV=t.Select(cU);cW=function(cX){return cX.Body.selectedIndex>=0?cM.Trigger($.New(n,{$:0,$0:cP[cX.Body.selectedIndex][0]})):null;};u.Events().OnChange(cW,cV);cY=cV;s.OnAfterRender(function(){cM.SubscribeImmediate(function(c0){var c1,c2,c4;if(c0.$==1){return null;}else{c1=c0.$0;c2=z.tryFindIndex($.Tupled(function(c3){return w.Equals(c1,c3[0]);}),cP);if(c2.$==0){return null;}else{c4=cU[c2.$0];return c4["HtmlProvider@32"].SetAttribute(c4.Body,"selected","");}}});},cY);return cY;},Show:function(c5,c6,c7){return v.ShowResult(c5,function(c8){return c8.$==1?k.empty():c6(c8.$0);},c7);},ShowErrors:function(c9,c_,c$){return v.ShowResult(c9,function(da){return da.$==1?c_(h.map(function(db){return db.get_Message();},da.$0)):k.empty();},c$);},ShowResult:function(dc,dd,de){var df;df=j.Get(dd(dc.get_Latest()));while(df.MoveNext()){de.AppendI(df.get_Current());}dc.Subscribe(function(dg){var dh;de["HtmlProvider@32"].Clear(de.Body);dh=j.Get(dd(dg));while(dh.MoveNext()){de.AppendI(dh.get_Current());}return;});return de;},ShowString:function(di,dj,dk){return v.Show(di,function(dl){return h.ofArray([t.Text(dj(dl))]);},dk);},Submit:function(dm){var dn,_do;dn=t.Input(h.ofArray([t.Attr().NewAttr("type","submit")]));_do=function(){return function(){return dm.Trigger($.New(n,{$:0,$0:null}));};};u.Events().OnClick(_do,dn);return dn;},SubmitValidate:function(dr){var ds;ds=v.Submit(dr);return v.EnableOnSuccess(dr.get_Input(),ds);},TextArea:function(dt){var du,dv,dy;du=t.TextArea($.New(i,{$:0}));dv=dt.get_Latest();if(dv.$==0){du.set_Value(dv.$0);}dt.Subscribe(function(dw){var dx;if(dw.$==1){return null;}else{dx=dw.$0;return du.get_Value()!==dx?du.set_Value(dx):null;}});dy=function(){return dt.Trigger($.New(n,{$:0,$0:du.get_Value()}));};du.Body.addEventListener("keyup",dy,true);du.Body.addEventListener("change",dy,true);return du;},WithLabel:function(dA,dB){var dC,dD;dC=(v.nextId())(null);dD=h.ofArray([t.Attr().NewAttr("for",dC),t.Text(dA)]);return t.Span(h.ofArray([t.Tags().NewTag("label",dD),s.add(dB,h.ofArray([t.Attr().NewAttr("id",dC)]))]));},WithLabelAfter:function(dE,dF){var dG,dH;dG=(v.nextId())(null);dH=h.ofArray([t.Attr().NewAttr("for",dG),t.Text(dE)]);return t.Span(h.ofArray([s.add(dF,h.ofArray([t.Attr().NewAttr("id",dG)])),t.Tags().NewTag("label",dH)]));},input:function(dI,dJ,dK,dL){var dM,dN,dQ;dM=t.Input(h.ofArray([t.Attr().NewAttr("type",dI)]));dN=dL.get_Latest();if(dN.$==0){dM.set_Value(dK(dN.$0));}dL.Subscribe(function(dO){var dP;if(dO.$==1){return null;}else{dP=dK(dO.$0);return dM.get_Value()!==dP?dM.set_Value(dP):null;}});dQ=function(){var dS;dS=$.New(n,{$:0,$0:dJ(dM.get_Value())});return!w.Equals(dS,dL.get_Latest())?dL.Trigger(dS):null;};dM.Body.addEventListener("keyup",dQ,true);dM.Body.addEventListener("change",dQ,true);return dM;},nextId:$.Field(function(){var dT;dT={contents:0};return function(){l.Increment(dT);return"pl__"+$$.String(dT.contents);};})},ErrorMessage:$.Class({get_Message:function(){return this.message;},get_Source:function(){return this.source;}},{Create:function(dV,dW){return A.New(dV,dW.get_Id());},New:function(dX,dY){var dZ;dZ=$.New(this,{});dZ.message=dX;dZ.source=dY;return dZ;}}),Id:{next:$.Field(function(){var d0;d0={contents:0};return function(){l.Increment(d0);return d0.contents;};})},Many:{Operations:$.Class({get_Delete:function(){return q.New(this["delete"]);},get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;}},{New:function(d2,d3,d4){var d5;d5=$.New(this,{});d5["delete"]=d2;d5.moveUp=d3;d5.moveDown=d4;return d5;}}),Stream:$.Class({AddRender:function(d6){return this.adder.view.call(null,d6);},Render:function(d7,d8){var d9,ea=this,eA;d9=function(d_){var d$,ec,ef,ei,ek,em,eo,eq,er,es,eu,ev,ew,ex;d$=ea.p.call(null,d_);ea.streams.Add(d$.stream);d$.stream.SubscribeImmediate(function(){return ea.update();});ec=function(){return k.findIndex(function(ee){return ee.get_Id()===d$.stream.get_Id();},ea.streams);};ef=function(eg){var eh;if(eg>0?eg<ea.streams.get_Count():false){eh=ea.streams.get_Item(eg);ea.streams.set_Item(eg,ea.streams.get_Item(eg-1));ea.streams.set_Item(eg-1,eh);d7.MoveUp(eg);return ea.update();}else{return null;}};ei=function(){return ef(ec(null)+1);};ek=function(){return ef(ec(null));};em=function(){return ec(null)>0?$.New(n,{$:0,$0:null}):$.New(n,{$:1,$0:$.New(i,{$:0})});};eo=function(){return ec(null)<ea.streams.get_Count()-1?$.New(n,{$:0,$0:null}):$.New(n,{$:1,$0:$.New(i,{$:0})});};eq=m.New(em(null),{$:0});er=m.New(eo(null),{$:0});es=ea.out.Subscribe(function(){eq.Trigger(em(null));return er.Trigger(eo(null));});eu=D.New(eq,false);ev=D.New(er,false);ew=eu.Subscribe(n.Iter(ek));ex=ev.Subscribe(n.Iter(ei));return d7.Add(d$.view.call(null,d8(E.New(function(){var ez;ez=ec(null);ea.streams.RemoveAt(ez);d7.Remove(ez);es.Dispose();ew.Dispose();ex.Dispose();return ea.update();},eu,ev))));};eA=ea.out.get_Latest();if(eA.$==0){z.iter(d9,eA.$0);}ea.adder.stream.Subscribe(function(eB){return eB.$==0?d9(eB.$0):null;});return d7.get_Container();},Subscribe:function(eC){return this.out.Subscribe(eC);},get_Add:function(){return this.adder.stream;},get_Latest:function(){return this.out.get_Latest();},update:function(){var eD;eD=this.out;return eD.Trigger(n.Map(function(eE){return z.ofSeq(h.rev(eE));},k.fold(function(eF){return function(eG){var eH;eH=[eF,eG.get_Latest()];return eH[0].$==1?eH[1].$==1?$.New(n,{$:1,$0:h.append(eH[1].$0,eH[0].$0)}):$.New(n,{$:1,$0:eH[0].$0}):eH[1].$==1?$.New(n,{$:1,$0:eH[1].$0}):$.New(n,{$:0,$0:$.New(i,{$:1,$0:eH[1].$0,$1:eH[0].$0})});};},$.New(n,{$:0,$0:$.New(i,{$:0})}),this.streams)));}},{New:function(eI,eJ,eK){var eL;eL=$.New(this,e.New(eJ.get_Id()));eL.p=eI;eL.out=eJ;eL.adder=eK;eL.streams=G.New2();return eL;}}),UnitStream:$.Class({get_Add:function(){return this.submitStream;}},{New:function(eM,eN,eO,eP){var eQ,eR,eS,eT;eQ=$.New(this,C.New(eM,eN,eO));eR=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});eS=eO.get_Stream();eT=function(eU){return eS.Trigger(eU);};eR.Subscribe(function(eV){return eV.$==0?eT($.New(n,{$:0,$0:eP})):eT($.New(n,{$:1,$0:eV.$0}));});eQ.submitStream=eR;return eQ;}})},Pervasives:{op_LessMultiplyGreater:function(eW,eX){var eY,eZ;eY=eW.view;eZ=eX.view;return $.New(I,{stream:J.Ap(eW.stream,eX.stream),view:function(e0){return eZ(eY(e0));}});},op_LessMultiplyQmarkGreater:function(e1,e2){var e3,e4;e3=e1.view;e4=e2.view;return $.New(I,{stream:J.ApJoin(e1.stream,e2.stream),view:function(e5){return e4(e3(e5));}});}},Piglet:$.Class({get_Stream:function(){return this.stream;}}),Piglet1:{Builder:$.Class({Bind:function(e6,e7){return K.Choose(e6,e7);},Return:function(e8){return K.Return(e8);},ReturnFrom:function(e9){return e9;},Yield:function(e_){return K.Yield(e_);},YieldFrom:function(e$){return e$;},Zero:function(){return K.ReturnFailure();}}),Choose:function(fa,fb){var fc,fd;fc=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});fd=d.New(fa,fb,fc);return $.New(I,{stream:fc,view:function(fe){return fe(fd);}});},Confirm:function(ff,fg,fh){var fi,fj,fm;fi=K.Yield(ff);fj=L.op_LessMultiplyGreater(L.op_LessMultiplyGreater(K.Return(function(fk){return function(fl){return[fk,fl];};}),fg(K.Yield(ff))),fi);fm=M["Is'"]($.Tupled(function(fn){return w.Equals(fn[0],fn[1]);}),A.Create(fh,fi.get_Stream()),fj);return K.MapViewArgs(function(fo){return function(fp){return[fo,fp];};},K.Map($.Tupled(function(fq){return fq[0];}),fm));},FlushErrors:function(fr){return K.MapResult(function(fs){return fs.$==1?$.New(n,{$:1,$0:$.New(i,{$:0})}):fs;},fr);},Many:function(ft,fu){return K.ManyInit([ft],ft,fu);},ManyInit:function(fv,fw,fx){var fy,fz;fy=m.New($.New(n,{$:0,$0:fv}),{$:0});fz=H.New(fx,fy,fx(fw),fw);return $.New(I,{stream:fy,view:function(fA){return fA(fz);}});},ManyPiglet:function(fB,fC,fD){var fE,fF;fE=m.New($.New(n,{$:0,$0:fB}),{$:0});fF=C.New(fD,fE,fC);return $.New(I,{stream:fE,view:function(fG){return fG(fF);}});},Map:function(fH,fI){return K.MapResult(function(fJ){return fJ.$==0?$.New(n,{$:0,$0:fH(fJ.$0)}):$.New(n,{$:1,$0:fJ.$0});},fI);},MapAsync:function(fK,fL){return K.MapAsyncResult(function(fM){var fN;if(fM.$==0){fN=fM.$0;return N.Delay(function(){return N.Bind(fK(fN),function(fP){return N.Return($.New(n,{$:0,$0:fP}));});});}else{return N.Return($.New(n,{$:1,$0:fM.$0}));}},fL);},MapAsyncResult:function(fQ,fR){var fS;fS=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});fR.stream.Subscribe(function(fT){return N.Start(N.Delay(function(){return N.Bind(fQ(fT),function(fV){return N.Return(fS.Trigger(fV));});}));});N.Start(N.Delay(function(){return N.Bind(fQ(fR.stream.get_Latest()),function(fX){return N.Return(fS.Trigger(fX));});}));return $.New(I,{stream:fS,view:fR.view});},MapResult:function(fY,fZ){var f0;f0=m.New(fY(fZ.stream.get_Latest()),{$:0});fZ.stream.Subscribe(function(f1){return f0.Trigger(fY(f1));});return $.New(I,{stream:f0,view:fZ.view});},MapResultWithWriter:function(f2,f3){var f4;f4=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});f3.stream.SubscribeImmediate(f2(f4));return $.New(I,{stream:f4,view:f3.view});},MapToAsyncResult:function(f5,f6){return K.MapAsyncResult(function(f7){return f7.$==0?f5(f7.$0):N.Return($.New(n,{$:1,$0:f7.$0}));},f6);},MapToResult:function(f8,f9){return K.MapResult(function(f_){return f_.$==0?f8(f_.$0):$.New(n,{$:1,$0:f_.$0});},f9);},MapViewArgs:function(f$,ga){var gb;gb=ga.view;return $.New(I,{stream:ga.stream,view:function(gc){return gc(gb(f$));}});},MapWithWriter:function(gd,ge){return K.MapResultWithWriter(function(gf){return function(gg){var gh;if(gg.$==0){gh=gg.$0;return(gd(gf))(gh);}else{return gf.Trigger($.New(n,{$:1,$0:gg.$0}));}};},ge);},Render:function(gi,gj){return gj.view.call(null,gi);},Return:function(gk){return $.New(I,{stream:m.New($.New(n,{$:0,$0:gk}),{$:0}),view:function(gl){return gl;}});},ReturnFailure:function(){return $.New(I,{stream:m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0}),view:function(gm){return gm;}});},Run:function(gn,go){return K.RunResult(n.Iter(gn),go);},RunResult:function(gp,gq){gq.stream.Subscribe(gp);return gq;},TransmitReader:function(gr){var gs,gt;gs=gr.view;gt=gr.stream;return $.New(I,{stream:gr.stream,view:function(gu){return(gs(gu))(gt);}});},TransmitReaderMap:function(gv,gw){var gx,gy;gx=gw.view;gy=e.Map(gv,gw.stream);return $.New(I,{stream:gw.stream,view:function(gz){return(gx(gz))(gy);}});},TransmitReaderMapResult:function(gA,gB){var gC,gD;gC=gB.view;gD=e.MapResult(gA,gB.stream);return $.New(I,{stream:gB.stream,view:function(gE){return(gC(gE))(gD);}});},TransmitReaderMapToResult:function(gF,gG){var gH,gI;gH=gG.view;gI=e.MapToResult(gF,gG.stream);return $.New(I,{stream:gG.stream,view:function(gJ){return(gH(gJ))(gI);}});},TransmitStream:function(gK){var gL,gM;gL=gK.view;gM=gK.stream;return $.New(I,{stream:gK.stream,view:function(gN){return(gL(gN))(gM);}});},TransmitWriter:function(gO){var gP,gQ;gP=gO.view;gQ=gO.stream;return $.New(I,{stream:gO.stream,view:function(gR){return(gP(gR))(gQ);}});},Validation:{Is:function(gS,gT,gU){var gV;gV=m.New(gU.stream.get_Latest(),{$:1,$0:gU.stream.get_Id()});gU.stream.Subscribe(function(gW){return gW.$==0?gS(gW.$0)?gV.Trigger($.New(n,{$:0,$0:gW.$0})):gV.Trigger($.New(n,{$:1,$0:h.ofArray([A.New(gT,gV.get_Id())])})):gV.Trigger($.New(n,{$:1,$0:gW.$0}));});return $.New(I,{stream:gV,view:gU.view});},"Is'":function(gX,gY,gZ){var g0;g0=m.New(gZ.stream.get_Latest(),{$:1,$0:gZ.stream.get_Id()});gZ.stream.Subscribe(function(g1){return g1.$==0?gX(g1.$0)?g0.Trigger($.New(n,{$:0,$0:g1.$0})):g0.Trigger($.New(n,{$:1,$0:h.ofArray([gY])})):g0.Trigger($.New(n,{$:1,$0:g1.$0}));});return $.New(I,{stream:g0,view:gZ.view});},Match:function(g2){var g3;g3=new O(g2);return function(g4){return g3.test(g4);};},NotEmpty:function(g5){return g5!=="";}},WithSubmit:function(g6){var g7,g8;g7=D.New(g6.stream,false);g8=g6.view;return $.New(I,{stream:g7.get_Output(),view:function(g9){return(g8(g9))(g7);}});},WithSubmitClearError:function(g_){var g$,ha;g$=D.New(g_.stream,true);ha=g_.view;return $.New(I,{stream:g$.get_Output(),view:function(hb){return(ha(hb))(g$);}});},Yield:function(hc){var hd;hd=m.New($.New(n,{$:0,$0:hc}),{$:0});return $.New(I,{stream:hd,view:function(he){return he(hd);}});},YieldFailure:function(){var hf;hf=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});return $.New(I,{stream:hf,view:function(hg){return hg(hf);}});},YieldOption:function(hh,hi){var hj,hl;hj=function(hk){return hk.$==1?hk.$0:hi;};hl=function(hm){return w.Equals(hm,hi)?{$:0}:{$:1,$0:hm};};return K.MapViewArgs(function(hn){return J.Map(hj,hl,hn);},K.Yield(hh));}},Reader:$.Class({SubscribeImmediate:function(ho){ho(this.get_Latest());return this.Subscribe(ho);},Through:function(hp){var hq,hu=this;hq=m.New(this.get_Latest(),{$:0});hp.Subscribe(function(hr){var hs,ht;if(hr.$==1){hs=hr.$0;ht=[hu.get_Latest(),h.filter(function(hv){return hv.get_Source()===hu.get_Id();},hs)];return ht[1].$==0?hq.Trigger(hu.get_Latest()):ht[0].$==1?hq.Trigger($.New(n,{$:1,$0:h.append(ht[0].$0,ht[1])})):hq.Trigger($.New(n,{$:1,$0:ht[1]}));}else{return hq.Trigger(hu.get_Latest());}});return hq;},get_Id:function(){return this.id;}},{Map:function(hw,hx){return e.MapResult(function(hy){return n.Map(hw,hy);},hx);},Map2:function(hz,hA,hB){return e.MapResult2(function(hC){return function(hD){return n.Map2(hz,hC,hD);};},hA,hB);},MapResult:function(hE,hF){var hG;hG=m.New(hE(hF.get_Latest()),{$:0});hF.Subscribe(function(hH){return hG.Trigger(hE(hH));});return hG;},MapResult2:function(hI,hJ,hK){var hL;hL=m.New((hI(hJ.get_Latest()))(hK.get_Latest()),{$:0});hJ.Subscribe(function(hM){return hL.Trigger((hI(hM))(hK.get_Latest()));});hK.Subscribe(function(hN){return hL.Trigger((hI(hJ.get_Latest()))(hN));});return hL;},MapToResult:function(hO,hP){return e.MapResult(n.Bind(hO),hP);},New:function(hQ){var hR;hR=$.New(this,{});hR.id=hQ;return hR;}}),Result:$.Class({get_isSuccess:function(){return this.$==1?false:true;}},{Ap:function(hS,hT){var hU;hU=[hS,hT];return hU[0].$==1?hU[1].$==1?$.New(n,{$:1,$0:h.append(hU[0].$0,hU[1].$0)}):$.New(n,{$:1,$0:hU[0].$0}):hU[1].$==1?$.New(n,{$:1,$0:hU[1].$0}):$.New(n,{$:0,$0:hU[0].$0.call(null,hU[1].$0)});},Bind:function(hV){return function(hW){return hW.$==1?$.New(n,{$:1,$0:hW.$0}):hV(hW.$0);};},Failwith:function(hX){return $.New(n,{$:1,$0:h.ofArray([A.New(hX,0)])});},Iter:function(hY){return function(hZ){return hZ.$==1?null:hY(hZ.$0);};},Join:function(h0){return h0.$==0?h0.$0.$==0?$.New(n,{$:0,$0:h0.$0.$0}):$.New(n,{$:1,$0:h0.$0.$0}):$.New(n,{$:1,$0:h0.$0});},Map:function(h1,h2){return h2.$==1?$.New(n,{$:1,$0:h2.$0}):$.New(n,{$:0,$0:h1(h2.$0)});},Map2:function(h3,h4,h5){var h6,h7;h6=[h4,h5];if(h6[0].$==1){return h6[1].$==1?$.New(n,{$:1,$0:h.append(h6[0].$0,h6[1].$0)}):$.New(n,{$:1,$0:h6[0].$0});}else{if(h6[1].$==1){return $.New(n,{$:1,$0:h6[1].$0});}else{h7=h6[1].$0;return $.New(n,{$:0,$0:(h3(h6[0].$0))(h7)});}}}}),Stream:$.Class({Subscribe:function(h8){return P.subscribeTo(this.s,h8);},Trigger:function(h9){return this.s.Trigger(h9);},Trigger1:function(h_){return this.Trigger(h_);},Write:function(h$){var ib=this;return q.New1(function(ia){return ia.$==0?ib.Trigger($.New(n,{$:0,$0:h$})):ib.Trigger($.New(n,{$:1,$0:ia.$0}));});},get_Latest:function(){return this.s.Latest.contents.$0;}},{New:function(ic,id){var ie;ie=$.New(this,e.New(id.$==0?(p.next())(null):id.$0));ie.s=R.New(ic);return ie;}}),Stream1:{Ap:function(_if,ig){var ih;ih=m.New(n.Ap(_if.get_Latest(),ig.get_Latest()),{$:0});_if.Subscribe(function(ii){return ih.Trigger(n.Ap(ii,ig.get_Latest()));});ig.Subscribe(function(ij){return ih.Trigger(n.Ap(_if.get_Latest(),ij));});return ih;},ApJoin:function(ik,il){var im;im=m.New(n.Ap(ik.get_Latest(),n.Join(il.get_Latest())),{$:0});ik.Subscribe(function(_in){return im.Trigger(n.Ap(_in,n.Join(il.get_Latest())));});il.Subscribe(function(io){return im.Trigger(n.Ap(ik.get_Latest(),n.Join(io)));});return im;},Map:function(ip,iq,ir){var is,it,iu;is=m.New(n.Map(ip,ir.get_Latest()),{$:1,$0:ir.get_Id()});it={contents:ir.get_Latest()};iu={contents:is.get_Latest()};ir.Subscribe(function(iv){if(it.contents!==iv){iu.contents=n.Map(ip,iv);return is.Trigger(iu.contents);}else{return null;}});is.Subscribe(function(iw){if(iu.contents!==iw){it.contents=n.Map(iq,iw);return ir.Trigger(it.contents);}else{return null;}});return is;}},Submitter:$.Class({Subscribe:function(ix){return this.output.Subscribe(ix);},Trigger:function(){return this.writer.Trigger($.New(n,{$:0,$0:null}));},Trigger1:function(iy){return this.writer.Trigger(iy);},get_Input:function(){return this.input;},get_Latest:function(){return this.output.get_Latest();},get_Output:function(){return this.output;}},{New:function(iz,iA){var iB;iB=$.New(this,e.New((p.next())(null)));iB.input=iz;iB.output=m.New($.New(n,{$:1,$0:$.New(i,{$:0})}),{$:0});iB.writer=q.New1(function(iC){var iD;iD=[iC,iB.input.get_Latest()];return iD[0].$==0?iD[1].$==0?iB.output.Trigger($.New(n,{$:0,$0:iD[1].$0})):iB.output.Trigger($.New(n,{$:1,$0:iD[1].$0})):iD[1].$==0?iB.output.Trigger($.New(n,{$:1,$0:iD[0].$0})):iB.output.Trigger($.New(n,{$:1,$0:h.append(iD[0].$0,iD[1].$0)}));});if(iA){iB.input.Subscribe(function(){return iB.output.Trigger($.New(n,{$:1,$0:$.New(i,{$:0})}));});}return iB;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Piglets);c=$.Safe(b.Choose);d=$.Safe(c.Stream);e=$.Safe(b.Reader);f=$.Safe(a.Collections);g=$.Safe(f.Dictionary);h=$.Safe(a.List);i=$.Safe(h.T);j=$.Safe(a.Enumerator);k=$.Safe(a.Seq);l=$.Safe(a.Operators);m=$.Safe(b.Stream);n=$.Safe(b.Result);o=$.Safe(b.ConcreteReader);p=$.Safe(b.Id);q=$.Safe(b.ConcreteWriter);r=$.Safe(a.Html);s=$.Safe(r.Operators);t=$.Safe(r.Default);u=$.Safe(r.EventsPervasives);v=$.Safe(b.Controls);w=$.Safe(a.Unchecked);x=$.Safe($$.jQuery);y=$.Safe(v.HtmlContainer);z=$.Safe(a.Arrays);A=$.Safe(b.ErrorMessage);B=$.Safe(b.Many);C=$.Safe(B.Stream);D=$.Safe(b.Submitter);E=$.Safe(B.Operations);F=$.Safe(f.ResizeArray);G=$.Safe(F.ResizeArrayProxy);H=$.Safe(B.UnitStream);I=$.Safe(b.Piglet);J=$.Safe(b.Stream1);K=$.Safe(b.Piglet1);L=$.Safe(b.Pervasives);M=$.Safe(K.Validation);N=$.Safe(a.Concurrency);O=$.Safe($$.RegExp);P=$.Safe(a.Util);Q=$.Safe($$.IntelliFactory.Reactive);return R=$.Safe(Q.HotStream);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(o,e);$.Inherit(C,e);$.Inherit(C,e);$.Inherit(H,C);$.Inherit(m,e);$.Inherit(D,e);p.next();v.nextId();return;});}());
