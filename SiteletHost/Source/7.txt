module Video =
    open IntelliFactory.WebSharper

    /// Client-side code.
    [<JavaScript>]
    module Client =
        open IntelliFactory.WebSharper.Html
        open IntelliFactory.WebSharper.Html5
        
        /// Appends a video element to the DOM.
        let main() =
            let elt =
                HTML5.Tags.Video [Attr.Height "360px"; Attr.Width "640px"] -< [
                    HTML5.Tags.Source [Attr.Src "/Videos/madagascar.mp4"; Attr.Type "video/mp4"]
                ]
            let video = As<HTMLVideoElement> elt.Dom
            video.Autoplay <- false
            video.Controls <- true
            video.Preload <- "metadata"
            video.Poster <- "/Images/madagascar.jpg"
            elt

    /// A control for serving the main pagelet.
    type Control() =
        inherit Web.Control()

        [<JavaScript>]
        override __.Body = Client.main() :> _