(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;$.Define($$,{WebSharper:{Piglets:{Choose:{Stream:$.Class({Choice:function(W,X){var Y,Z,_4=this;Y=f.New12();Z={contents:false};this.subscriptions.contents=$.New(h,{$:1,$0:this.pStream.SubscribeImmediate(function(_0){var _1,_2,_3;if(_0.$==0){_1=_0.$0[1];_2=_0.$0[0];_3=Y.ContainsKey(_2)?Y.get_Item(_2):_1.view.call(null,X);_4.out.Trigger(_1.stream.get_Latest());if(Z.contents){W.Remove(0);}Z.contents=true;return W.Add(_3);}else{return null;}}),$1:_4.subscriptions.contents});return W.get_Container();},Chooser:function(_5){return this.chooser.view.call(null,_5);},Dispose:function(){var _6,_7;_6=this.subscriptions.contents;_7=i.Get(_6);while(_7.MoveNext()){_7.get_Current().Dispose();}return j.iter(function(_8){return(k.KeyValue(_8))[1][1].Dispose();},this.choiceSubscriptions);},Subscribe:function(_9){return this.out.Subscribe(_9);},get_ChooserStream:function(){return this.chooser.stream;},get_Latest:function(){return this.out.get_Latest();}},{New:function(_,ba,bb){var bc;bc=$.New(this,d.New(bb.get_Id()));bc.chooser=_;bc.out=bb;bc.pStream=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});bc.choiceSubscriptions=f.New12();bc.subscriptions={contents:g.ofArray([bc.chooser.stream.SubscribeImmediate(function(bd){return bc.pStream.Trigger(m.Map(function(be){var bf,bg,bh;if(bc.choiceSubscriptions.ContainsKey(be)){bf=(bc.choiceSubscriptions.get_Item(be))[0];}else{bg=ba(be);bh=bc.out;bc.choiceSubscriptions.set_Item(be,[bg,bg.stream.Subscribe(function(bi){return bh.Trigger(bi);})]);bf=bg;}return[be,bf];},bd));})])};return bc;}})},ConcreteReader:$.Class({Subscribe:function(bi){return this.subscribe.call(null,bi);},get_Latest:function(){return this.latest.call(null,null);}},{New:function(bj,bk){var bl;bl=$.New(this,d.New((o.next())(null)));bl.latest=bj;bl.subscribe=bk;return bl;}}),ConcreteWriter:$.Class({Trigger:function(bm){return this.trigger.call(null,bm);}},{New:function(bn){var bo;bo=$.New(this,{});bo.trigger=bn;return bo;},New1:function(bp){return p.New(function(bq){return bq.$==1?null:bp(bq.$0);});}}),ConstReader:$.Class({Subscribe:function(){return r.New(function(){});},get_Latest:function(){return this.x;}},{New:function(bt){var bu;bu=$.New(this,d.New((o.next())(null)));bu.x=bt;return bu;}}),Controls:{Attr:function(bv,bw,bx,by){u.OnAfterRender(function(bz){var bA;bA=function(bB){var bC,bD,bE;if(bB.$==0){bC=bx(bB.$0);bD=bz["HtmlProvider@33"];bE=bz.get_Body();return bD.SetAttribute(bE,bw,bC);}else{return null;}};bA(bv.get_Latest());bv.Subscribe(bA);return;},by);return by;},AttrResult:function(bF,bG,bH,bI){u.OnAfterRender(function(bJ){var bK;bK=function(bL){var bM,bN,bO;bM=bH(bL);bN=bJ["HtmlProvider@33"];bO=bJ.get_Body();return bN.SetAttribute(bO,bG,bM);};bK(bF.get_Latest());bF.Subscribe(bK);return;},bI);return bI;},Button:function(bP){var bQ,bR,bS,bT;bQ=$.New(h,{$:0});bR=v.Tags();bS=bR.NewTag("button",bQ);bT=function(){return function(){return bP.Trigger($.New(m,{$:0,$0:null}));};};w.Events().OnClick(bT,bS);return bS;},ButtonValidate:function(bW){var bX;bX=x.Button(bW);return x.EnableOnSuccess(bW.get_Input(),bX);},CheckBox:function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6,b9;bZ=(x.nextId())(null);b0=v.Tags();b2=y.Attr();b3=y.Attr();b1=g.ofArray([b2.NewAttr("type","checkbox"),b3.NewAttr("id",bZ)]);b4=b0.NewTag("input",b1);b5=bY.get_Latest();if(b5.$==0){b6=b5.$0;b4.get_Body().checked=b6;}bY.Subscribe(function(b7){var b8;if(b7.$==1){return null;}else{b8=b7.$0;return!z.Equals(b4.get_Body().checked,b8)?void(b4.get_Body().checked=b8):null;}});b9=function(){return bY.Trigger($.New(m,{$:0,$0:b4.get_Body().checked}));};b4.get_Body().addEventListener("change",b9,true);return b4;},Css:function(b$,ca,cb,cc){u.OnAfterRender(function(cd){var ce;ce=function(cf){var cg,ch,ci;if(cf.$==0){cg=cb(cf.$0);ch=cd["HtmlProvider@33"];ci=cd.get_Body();return ch.SetCss(ci,ca,cg);}else{return null;}};ce(b$.get_Latest());b$.Subscribe(ce);return;},cc);return cc;},CssResult:function(cj,ck,cl,cm){u.OnAfterRender(function(cn){var co;co=function(cp){var cq,cr,cs;cq=cl(cp);cr=cn["HtmlProvider@33"];cs=cn.get_Body();return cr.SetCss(cs,ck,cq);};co(cj.get_Latest());cj.Subscribe(co);return;},cm);return cm;},EnableOnSuccess:function(ct,cu){u.OnAfterRender(function(cv){cv.get_Body().disabled=!ct.get_Latest().get_isSuccess();ct.Subscribe(function(cw){cv.get_Body().disabled=!cw.get_isSuccess();});return;},cu);return cu;},HtmlContainer:$.Class({Add:function(cx){return this.container.AppendI(cx);},MoveUp:function(cy){var cz,cA;cz=this.container.get_Body().childNodes[cy];cA=this.container.get_Body().childNodes[cy-1];this.container.get_Body().removeChild(cz);this.container.get_Body().insertBefore(cz,cA);return;},Remove:function(cB){this.container.get_Body().removeChild(this.container.get_Body().childNodes[cB]);},get_Container:function(){return this.container;}},{New:function(cC){var cD;cD=$.New(this,{});cD.container=cC;return cD;}}),IntInput:function(cE){return x.input("number",function(cF){return cF<<0;},function(cG){return $$.String(cG);},cE);},Link:function(cH){var cI,cJ,cK,cL;cJ=y.Attr();cI=g.ofArray([cJ.NewAttr("href","#")]);cK=v.Tags();cL=cK.NewTag("a",cI);u.OnAfterRender(function(cM){return A(cM.get_Body()).on("click",function(cN){cH.Trigger($.New(m,{$:0,$0:null}));return cN.preventDefault();});},cL);return cL;},Radio:function(cO,cP){var cQ,cR,cS,c1;cQ=(x.nextId())(null);cR=g.ofSeq(cP);cS=g.map(function(cT){var cU,cV,cW,cX,cY,cZ;cU=v.Tags();cW=y.Attr();cX=y.Attr();cV=g.ofArray([cW.NewAttr("type","radio"),cX.NewAttr("name",cQ)]);cY=cU.NewTag("input",cV);cZ=function(c0){return c0.get_Body().checked?cO.Trigger($.New(m,{$:0,$0:cT})):null;};w.Events().OnChange(cZ,cY);return cY;},cR);c1=function(c2){var c3;if(c2.$==1){return null;}else{c3=c2.$0;return g.iter2(function(c4){return function(c5){c5.get_Body().checked=z.Equals(c4,c3);};},cR,cS);}};c1(cO.get_Latest());cO.Subscribe(c1);return cS;},RadioLabelled:function(c6,c7){var c8,c_,dk;c8=x.Radio(c6,j.map(function(c9){return c9[0];},c7));c_=j.mapi2(function(c$){var da,db;da=c$[0];db=c$[1];return function(dc){var dd,de,df,dg,dh,di,dj;dd=(x.nextId())(null);df=y.Attr();dh=y.Attr();dg=g.ofArray([dh.NewAttr("for",dd),v.Tags().text(db)]);di=v.Tags();de=g.ofArray([u.add(dc,g.ofArray([df.NewAttr("id",dd)])),di.NewTag("label",dg)]);dj=v.Tags();return dj.NewTag("span",de);};},c7,c8);dk=v.Tags();return dk.NewTag("div",c_);},RenderChoice:function(dl,dm,dn){return dl.Choice(B.New(dn),dm);},RenderMany:function(_do,dp,dq){return _do.Render(B.New(dq),dp);},Select:function(dr,ds){var dt,du,dv,dC,dD,dE,dG;dt=(x.nextId())(null);du=C.ofSeq(ds);dv=C.map(function(dw){var dx,dy,dz,dA,dB;dx=dw[1];dy=(x.nextId())(null);dz=v.Tags();dB=y.Attr();dA=g.ofArray([dB.NewAttr("value",dy)]);return u.add(dz.NewTag("option",dA),g.ofArray([v.Tags().text(dx)]));},du);dC=v.Tags();dD=dC.NewTag("select",dv);dE=function(dF){return dF.get_Body().selectedIndex>=0?dr.Trigger($.New(m,{$:0,$0:(C.get(du,dF.get_Body().selectedIndex))[0]})):null;};w.Events().OnChange(dE,dD);dG=dD;u.OnAfterRender(function(){dr.SubscribeImmediate(function(dI){var dJ,dK,dM,dN,dO;if(dI.$==1){return null;}else{dJ=dI.$0;dK=C.tryFindIndex(function(dL){return z.Equals(dJ,dL[0]);},du);if(dK.$==0){return null;}else{dM=C.get(dv,dK.$0);dN=dM["HtmlProvider@33"];dO=dM.get_Body();return dN.SetAttribute(dO,"selected","");}}});},dG);return dG;},Show:function(dP,dQ,dR){return x.ShowResult(dP,function(dS){return dS.$==1?j.empty():dQ(dS.$0);},dR);},ShowErrors:function(dT,dU,dV){return x.ShowResult(dT,function(dW){return dW.$==1?dU(g.map(function(dX){return dX.get_Message();},dW.$0)):j.empty();},dV);},ShowResult:function(dY,dZ,d0){var d1,d2;d1=dZ(dY.get_Latest());d2=i.Get(d1);while(d2.MoveNext()){d0.AppendI(d2.get_Current());}dY.Subscribe(function(d3){var d4,d5;d0["HtmlProvider@33"].Clear(d0.get_Body());d4=dZ(d3);d5=i.Get(d4);while(d5.MoveNext()){d0.AppendI(d5.get_Current());}return;});return d0;},ShowString:function(d6,d7,d8){return x.Show(d6,function(d9){var d_;d_=d7(d9);return g.ofArray([v.Tags().text(d_)]);},d8);},Submit:function(d$){var ea,eb,ec,ed,ee;ea=v.Tags();ec=y.Attr();eb=g.ofArray([ec.NewAttr("type","submit")]);ed=ea.NewTag("input",eb);ee=function(){return function(){return d$.Trigger($.New(m,{$:0,$0:null}));};};w.Events().OnClick(ee,ed);return ed;},SubmitValidate:function(eh){var ei;ei=x.Submit(eh);return x.EnableOnSuccess(eh.get_Input(),ei);},TextArea:function(ej){var ek,el,em,en,eq;ek=v.Tags();el=$.New(h,{$:0});em=ek.NewTag("textarea",el);en=ej.get_Latest();if(en.$==0){em.set_Value(en.$0);}ej.Subscribe(function(eo){var ep;if(eo.$==1){return null;}else{ep=eo.$0;return em.get_Value()!==ep?em.set_Value(ep):null;}});eq=function(){return ej.Trigger($.New(m,{$:0,$0:em.get_Value()}));};em.get_Body().addEventListener("keyup",eq,true);em.get_Body().addEventListener("change",eq,true);return em;},WithLabel:function(es,et){var eu,ev,ew,ex,ey,ez,eA;eu=(x.nextId())(null);ex=y.Attr();ew=g.ofArray([ex.NewAttr("for",eu),v.Tags().text(es)]);ey=v.Tags();ez=y.Attr();ev=g.ofArray([ey.NewTag("label",ew),u.add(et,g.ofArray([ez.NewAttr("id",eu)]))]);eA=v.Tags();return eA.NewTag("span",ev);},WithLabelAfter:function(eB,eC){var eD,eE,eF,eG,eH,eI,eJ;eD=(x.nextId())(null);eF=y.Attr();eH=y.Attr();eG=g.ofArray([eH.NewAttr("for",eD),v.Tags().text(eB)]);eI=v.Tags();eE=g.ofArray([u.add(eC,g.ofArray([eF.NewAttr("id",eD)])),eI.NewTag("label",eG)]);eJ=v.Tags();return eJ.NewTag("span",eE);},input:function(eK,eL,eM,eN){var eO,eP,eQ,eR,eS,eV;eO=v.Tags();eQ=y.Attr();eP=g.ofArray([eQ.NewAttr("type",eK)]);eR=eO.NewTag("input",eP);eS=eN.get_Latest();if(eS.$==0){eR.set_Value(eM(eS.$0));}eN.Subscribe(function(eT){var eU;if(eT.$==1){return null;}else{eU=eM(eT.$0);return eR.get_Value()!==eU?eR.set_Value(eU):null;}});eV=function(){var eX;eX=$.New(m,{$:0,$0:eL(eR.get_Value())});return!z.Equals(eX,eN.get_Latest())?eN.Trigger(eX):null;};eR.get_Body().addEventListener("keyup",eV,true);eR.get_Body().addEventListener("change",eV,true);return eR;},nextId:$.Field(function(){var eY;eY={contents:0};return function(){k.Increment(eY);return"pl__"+$$.String(eY.contents);};})},Disposable:$.Class({Dispose:function(){return this.dispose.call(null,null);}},{New:function(e0){var e1;e1=$.New(this,{});e1.dispose=e0;return e1;}}),ErrorMessage:$.Class({get_Message:function(){return this.message;},get_Source:function(){return this.source;}},{Create:function(e2,e3){return D.New(e2,e3.get_Id());},New:function(e4,e5){var e6;e6=$.New(this,{});e6.message=e4;e6.source=e5;return e6;}}),Id:{next:$.Field(function(){var e7;e7={contents:0};return function(){k.Increment(e7);return e7.contents;};})},Many:{Operations:$.Class({get_Delete:function(){return p.New1(this["delete"]);},get_MoveDown:function(){return this.moveDown;},get_MoveUp:function(){return this.moveUp;}},{New:function(e9,e_,e$){var fa;fa=$.New(this,{});fa["delete"]=e9;fa.moveUp=e_;fa.moveDown=e$;return fa;}}),Stream:$.Class({AddRender:function(fb){return this.adder.view.call(null,fb);},Render:function(fc,fd){var fe,fh=this,fH;fe=function(ff){var fg,fj,fm,fp,fr,ft,fv,fx,fy,fz,fB,fC,fD,fE;fg=fh.p.call(null,ff);fh.streams.Add(fg.stream);fg.stream.SubscribeImmediate(function(){return fh.update();});fj=function(){return j.findIndex(function(fl){return fl.get_Id()===fg.stream.get_Id();},fh.streams);};fm=function(fn){var fo;if(fn>0?fn<fh.streams.get_Count():false){fo=fh.streams.get_Item(fn);fh.streams.set_Item(fn,fh.streams.get_Item(fn-1));fh.streams.set_Item(fn-1,fo);fc.MoveUp(fn);return fh.update();}else{return null;}};fp=function(){return fm(fj(null)+1);};fr=function(){return fm(fj(null));};ft=function(){return fj(null)>0?$.New(m,{$:0,$0:null}):$.New(m,{$:1,$0:$.New(h,{$:0})});};fv=function(){return fj(null)<fh.streams.get_Count()-1?$.New(m,{$:0,$0:null}):$.New(m,{$:1,$0:$.New(h,{$:0})});};fx=l.New(ft(null),{$:0});fy=l.New(fv(null),{$:0});fz=fh.out.Subscribe(function(){fx.Trigger(ft(null));return fy.Trigger(fv(null));});fB=G.New(fx,false);fC=G.New(fy,false);fD=fB.Subscribe(m.Iter(fr));fE=fC.Subscribe(m.Iter(fp));return fc.Add(fg.view.call(null,fd(H.New(function(){var fG;fG=fj(null);fh.streams.RemoveAt(fG);fc.Remove(fG);fz.Dispose();fD.Dispose();fE.Dispose();return fh.update();},fB,fC))));};fH=fh.out.get_Latest();if(fH.$==0){C.iter(fe,fH.$0);}fh.adder.stream.Subscribe(function(fI){return fI.$==0?fe(fI.$0):null;});return fc.get_Container();},Subscribe:function(fJ){return this.out.Subscribe(fJ);},get_Add:function(){return this.adder.stream;},get_Latest:function(){return this.out.get_Latest();},update:function(){var fK;fK=this.out;return fK.Trigger(m.Map(function(fL){var fM;fM=g.rev(fL);return C.ofSeq(fM);},j.fold(function(fN){return function(fO){var fP,fQ,fR;fP=[fN,fO.get_Latest()];if(fP[0].$==1){if(fP[1].$==1){fQ=fP[0].$0;fR=fP[1].$0;return $.New(m,{$:1,$0:g.append(fR,fQ)});}else{return $.New(m,{$:1,$0:fP[0].$0});}}else{return fP[1].$==1?$.New(m,{$:1,$0:fP[1].$0}):$.New(m,{$:0,$0:$.New(h,{$:1,$0:fP[1].$0,$1:fP[0].$0})});}};},$.New(m,{$:0,$0:$.New(h,{$:0})}),this.streams)));}},{New:function(fS,fT,fU){var fV;fV=$.New(this,d.New(fT.get_Id()));fV.p=fS;fV.out=fT;fV.adder=fU;fV.streams=J.New2();return fV;}}),UnitStream:$.Class({get_Add:function(){return this.submitStream;}},{New:function(fW,fX,fY,fZ){var f0,f1,f2,f3;f0=$.New(this,F.New(fW,fX,fY));f1=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});f2=fY.get_Stream();f3=function(f4){return f2.Trigger(f4);};f1.Subscribe(function(f5){return f5.$==0?f3($.New(m,{$:0,$0:fZ})):f3($.New(m,{$:1,$0:f5.$0}));});f0.submitStream=f1;return f0;}})},Pervasives:{"Writer`1.Wrap.Static":function(f6,f7){return p.New(function(f8){return f7.Trigger(m.Map(f6,f8));});},"Writer`1.WrapAsync.Static":function(f9,f_){return L["Writer`1.WrapToAsyncResult.Static"](function(f$){var ga;ga=function(){var gc,gd;gc=f9(f$);gd=function(ge){var gf;gf=$.New(m,{$:0,$0:ge});return M.Return(gf);};return M.Bind(gc,gd);};return M.Delay(ga);},f_);},"Writer`1.WrapAsyncResult.Static":function(gg,gh){return p.New(function(gi){var gj,go,gp;gj=function(){var gl,gm;gl=gg(gi);gm=function(gn){gh.Trigger(gn);return M.Return(null);};return M.Bind(gl,gm);};go=M.Delay(gj);gp={$:0};return M.Start(go,gp);});},"Writer`1.WrapResult.Static":function(gq,gr){return p.New(function(gs){return gr.Trigger(gq(gs));});},"Writer`1.WrapToAsyncResult.Static":function(gt,gu){return L["Writer`1.WrapAsyncResult.Static"](function(gv){var gw;gw=function(){var gy,gz;if(gv.$==1){gy=$.New(m,{$:1,$0:gv.$0});return M.Return(gy);}else{gz=gt(gv.$0);return gz;}};return M.Delay(gw);},gu);},"Writer`1.WrapToResult.Static":function(gA,gB){return p.New(function(gC){return gB.Trigger((m.Bind(gA))(gC));});},op_LessMultiplyGreater:function(gD,gE){var gF,gG;gF=gD.view;gG=gE.view;return $.New(N,{stream:O.Ap(gD.stream,gE.stream),view:function(gH){return gG(gF(gH));}});},op_LessMultiplyQmarkGreater:function(gI,gJ){var gK,gL;gK=gI.view;gL=gJ.view;return $.New(N,{stream:O.ApJoin(gI.stream,gJ.stream),view:function(gM){return gL(gK(gM));}});}},Piglet:{Builder:$.Class({Bind:function(gN,gO){return P.Choose(gN,gO);},Return:function(gP){return P.Return(gP);},ReturnFrom:function(gQ){return gQ;},Yield:function(gR){return P.Yield(gR);},YieldFrom:function(gS){return gS;},Zero:function(){return P.ReturnFailure();}}),Choose:function(gT,gU){var gV,gW;gV=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});gW=c.New(gT,gU,gV);return $.New(N,{stream:gV,view:function(gX){return gX(gW);}});},Confirm:function(gY,gZ,g0){var g1,g2;g1=P.Yield(gY);g2=L.op_LessMultiplyGreater(L.op_LessMultiplyGreater(P.Return(function(g3){return function(g4){return[g3,g4];};}),gZ(P.Yield(gY))),g1);return P.MapViewArgs(function(g5){return function(g6){return[g5,g6];};},P.Map(function(g7){return g7[0];},Q["Is'"](function(g8){return z.Equals(g8[0],g8[1]);},D.Create(g0,g1.get_Stream()),g2)));},FlushErrors:function(g9){return P.MapResult(function(g_){return g_.$==1?$.New(m,{$:1,$0:$.New(h,{$:0})}):g_;},g9);},Many:function(g$,ha){return P.ManyInit([g$],g$,ha);},ManyInit:function(hb,hc,hd){var he,hf;he=l.New($.New(m,{$:0,$0:hb}),{$:0});hf=K.New(hd,he,hd(hc),hc);return $.New(N,{stream:he,view:function(hg){return hg(hf);}});},ManyPiglet:function(hh,hi,hj){var hk,hl;hk=l.New($.New(m,{$:0,$0:hh}),{$:0});hl=F.New(hj,hk,hi);return $.New(N,{stream:hk,view:function(hm){return hm(hl);}});},Map:function(hn,ho){return P.MapResult(function(hp){return hp.$==0?$.New(m,{$:0,$0:hn(hp.$0)}):$.New(m,{$:1,$0:hp.$0});},ho);},MapAsync:function(hq,hr){return P.MapAsyncResult(function(hs){var ht,hu,hA;if(hs.$==0){ht=hs.$0;hu=function(){var hw,hx;hw=hq(ht);hx=function(hy){var hz;hz=$.New(m,{$:0,$0:hy});return M.Return(hz);};return M.Bind(hw,hx);};return M.Delay(hu);}else{hA=$.New(m,{$:1,$0:hs.$0});return M.Return(hA);}},hr);},MapAsyncResult:function(hB,hC){var hD,hN,hT,hU;hD=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});hC.stream.Subscribe(function(hE){var hF,hL,hM;hF=function(){var hH,hI;hH=hB(hE);hI=function(hJ){var hK;hK=hD.Trigger(hJ);return M.Return(hK);};return M.Bind(hH,hI);};hL=M.Delay(hF);hM={$:0};return M.Start(hL,hM);});hN=function(){var hP,hQ;hP=hB(hC.stream.get_Latest());hQ=function(hR){var hS;hS=hD.Trigger(hR);return M.Return(hS);};return M.Bind(hP,hQ);};hT=M.Delay(hN);hU={$:0};M.Start(hT,hU);return $.New(N,{stream:hD,view:hC.view});},MapResult:function(hV,hW){var hX;hX=l.New(hV(hW.stream.get_Latest()),{$:0});hW.stream.Subscribe(function(hY){return hX.Trigger(hV(hY));});return $.New(N,{stream:hX,view:hW.view});},MapResultWithWriter:function(hZ,h0){var h1;h1=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});h0.stream.SubscribeImmediate(hZ(h1));return $.New(N,{stream:h1,view:h0.view});},MapToAsyncResult:function(h2,h3){return P.MapAsyncResult(function(h4){var h5;if(h4.$==0){return h2(h4.$0);}else{h5=$.New(m,{$:1,$0:h4.$0});return M.Return(h5);}},h3);},MapToResult:function(h6,h7){return P.MapResult(function(h8){return h8.$==0?h6(h8.$0):$.New(m,{$:1,$0:h8.$0});},h7);},MapViewArgs:function(h9,h_){var h$;h$=h_.view;return $.New(N,{stream:h_.stream,view:function(ia){return ia(h$(h9));}});},MapWithWriter:function(ib,ic){return P.MapResultWithWriter(function(id){return function(ie){var _if;if(ie.$==0){_if=ie.$0;return(ib(id))(_if);}else{return id.Trigger($.New(m,{$:1,$0:ie.$0}));}};},ic);},Render:function(ig,ih){return ih.view.call(null,ig);},Return:function(ii){return $.New(N,{stream:l.New($.New(m,{$:0,$0:ii}),{$:0}),view:function(ij){return ij;}});},ReturnFailure:function(){return $.New(N,{stream:l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0}),view:function(ik){return ik;}});},Run:function(il,im){return P.RunResult(m.Iter(il),im);},RunResult:function(_in,io){io.stream.Subscribe(_in);return io;},TransmitReader:function(ip){var iq,ir;iq=ip.view;ir=ip.stream;return $.New(N,{stream:ip.stream,view:function(is){return(iq(is))(ir);}});},TransmitReaderMap:function(it,iu){var iv,iw;iv=iu.view;iw=d.Map(it,iu.stream);return $.New(N,{stream:iu.stream,view:function(ix){return(iv(ix))(iw);}});},TransmitReaderMapResult:function(iy,iz){var iA,iB;iA=iz.view;iB=d.MapResult(iy,iz.stream);return $.New(N,{stream:iz.stream,view:function(iC){return(iA(iC))(iB);}});},TransmitReaderMapToResult:function(iD,iE){var iF,iG;iF=iE.view;iG=d.MapToResult(iD,iE.stream);return $.New(N,{stream:iE.stream,view:function(iH){return(iF(iH))(iG);}});},TransmitStream:function(iI){var iJ,iK;iJ=iI.view;iK=iI.stream;return $.New(N,{stream:iI.stream,view:function(iL){return(iJ(iL))(iK);}});},TransmitWriter:function(iM){var iN,iO;iN=iM.view;iO=iM.stream;return $.New(N,{stream:iM.stream,view:function(iP){return(iN(iP))(iO);}});},Validation:{Is:function(iQ,iR,iS){var iT;iT=l.New(iS.stream.get_Latest(),{$:1,$0:iS.stream.get_Id()});iS.stream.Subscribe(function(iU){return iU.$==0?iQ(iU.$0)?iT.Trigger($.New(m,{$:0,$0:iU.$0})):iT.Trigger($.New(m,{$:1,$0:g.ofArray([D.New(iR,iT.get_Id())])})):iT.Trigger($.New(m,{$:1,$0:iU.$0}));});return $.New(N,{stream:iT,view:iS.view});},"Is'":function(iV,iW,iX){var iY;iY=l.New(iX.stream.get_Latest(),{$:1,$0:iX.stream.get_Id()});iX.stream.Subscribe(function(iZ){return iZ.$==0?iV(iZ.$0)?iY.Trigger($.New(m,{$:0,$0:iZ.$0})):iY.Trigger($.New(m,{$:1,$0:g.ofArray([iW])})):iY.Trigger($.New(m,{$:1,$0:iZ.$0}));});return $.New(N,{stream:iY,view:iX.view});},Match:function(i0){var i1;i1=new R(i0);return function(i2){return i1.test(i2);};},NotEmpty:function(i3){return i3!=="";}},WithSubmit:function(i4){var i5,i6;i5=G.New(i4.stream,false);i6=i4.view;return $.New(N,{stream:i5.get_Output(),view:function(i7){return(i6(i7))(i5);}});},WithSubmitClearError:function(i8){var i9,i_;i9=G.New(i8.stream,true);i_=i8.view;return $.New(N,{stream:i9.get_Output(),view:function(i$){return(i_(i$))(i9);}});},Yield:function(ja){var jb;jb=l.New($.New(m,{$:0,$0:ja}),{$:0});return $.New(N,{stream:jb,view:function(jc){return jc(jb);}});},YieldFailure:function(){var jd;jd=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});return $.New(N,{stream:jd,view:function(je){return je(jd);}});},YieldOption:function(jf,jg){var jh,jj;jh=function(ji){return ji.$==1?ji.$0:jg;};jj=function(jk){return z.Equals(jk,jg)?{$:0}:{$:1,$0:jk};};return P.MapViewArgs(function(jl){return O.Map(jh,jj,jl);},P.Yield(jf));}},Piglet1:$.Class({get_Stream:function(){return this.stream;}}),Reader:$.Class({SubscribeImmediate:function(jm){jm(this.get_Latest());return this.Subscribe(jm);},Through:function(jn){var jo,js=this;jo=l.New(this.get_Latest(),{$:0});jn.Subscribe(function(jp){var jq,jr,ju,jv;if(jp.$==1){jq=jp.$0;jr=[js.get_Latest(),g.filter(function(jt){return jt.get_Source()===js.get_Id();},jq)];if(jr[1].$==0){return jo.Trigger(js.get_Latest());}else{if(jr[0].$==1){ju=jr[1];jv=jr[0].$0;return jo.Trigger($.New(m,{$:1,$0:g.append(jv,ju)}));}else{return jo.Trigger($.New(m,{$:1,$0:jr[1]}));}}}else{return jo.Trigger(js.get_Latest());}});return jo;},get_Id:function(){return this.id;}},{Const:function(jw){return q.New($.New(m,{$:0,$0:jw}));},ConstResult:function(jx){return q.New(jx);},Map:function(jy,jz){return d.MapResult(function(jA){return m.Map(jy,jA);},jz);},Map2:function(jB,jC,jD){return d.MapResult2(function(jE){return function(jF){return m.Map2(jB,jE,jF);};},jC,jD);},MapResult:function(jG,jH){var jI;jI=l.New(jG(jH.get_Latest()),{$:0});jH.Subscribe(function(jJ){return jI.Trigger(jG(jJ));});return jI;},MapResult2:function(jK,jL,jM){var jN;jN=l.New((jK(jL.get_Latest()))(jM.get_Latest()),{$:0});jL.Subscribe(function(jO){return jN.Trigger((jK(jO))(jM.get_Latest()));});jM.Subscribe(function(jP){return jN.Trigger((jK(jL.get_Latest()))(jP));});return jN;},MapToResult:function(jQ,jR){return d.MapResult(m.Bind(jQ),jR);},New:function(jS){var jT;jT=$.New(this,{});jT.id=jS;return jT;}}),Result:$.Class({get_isSuccess:function(){return this.$==1?false:true;}},{Ap:function(jU,jV){var jW,jX,jY;jW=[jU,jV];if(jW[0].$==1){if(jW[1].$==1){jX=jW[0].$0;jY=jW[1].$0;return $.New(m,{$:1,$0:g.append(jX,jY)});}else{return $.New(m,{$:1,$0:jW[0].$0});}}else{return jW[1].$==1?$.New(m,{$:1,$0:jW[1].$0}):$.New(m,{$:0,$0:jW[0].$0.call(null,jW[1].$0)});}},Bind:function(jZ){return function(j0){return j0.$==1?$.New(m,{$:1,$0:j0.$0}):jZ(j0.$0);};},Failwith:function(j1){return $.New(m,{$:1,$0:g.ofArray([D.New(j1,0)])});},Iter:function(j2){return function(j3){return j3.$==1?null:j2(j3.$0);};},Join:function(j4){return j4.$==0?j4.$0.$==0?$.New(m,{$:0,$0:j4.$0.$0}):$.New(m,{$:1,$0:j4.$0.$0}):$.New(m,{$:1,$0:j4.$0});},Map:function(j5,j6){return j6.$==1?$.New(m,{$:1,$0:j6.$0}):$.New(m,{$:0,$0:j5(j6.$0)});},Map2:function(j7,j8,j9){var j_,j$,ka,kb;j_=[j8,j9];if(j_[0].$==1){if(j_[1].$==1){j$=j_[0].$0;ka=j_[1].$0;return $.New(m,{$:1,$0:g.append(j$,ka)});}else{return $.New(m,{$:1,$0:j_[0].$0});}}else{if(j_[1].$==1){return $.New(m,{$:1,$0:j_[1].$0});}else{kb=j_[1].$0;return $.New(m,{$:0,$0:(j7(j_[0].$0))(kb)});}}}}),Stream:{Ap:function(kc,kd){var ke;ke=l.New(m.Ap(kc.get_Latest(),kd.get_Latest()),{$:0});kc.Subscribe(function(kf){return ke.Trigger(m.Ap(kf,kd.get_Latest()));});kd.Subscribe(function(kg){return ke.Trigger(m.Ap(kc.get_Latest(),kg));});return ke;},ApJoin:function(kh,ki){var kj;kj=l.New(m.Ap(kh.get_Latest(),m.Join(ki.get_Latest())),{$:0});kh.Subscribe(function(kk){return kj.Trigger(m.Ap(kk,m.Join(ki.get_Latest())));});ki.Subscribe(function(kl){return kj.Trigger(m.Ap(kh.get_Latest(),m.Join(kl)));});return kj;},Map:function(km,kn,ko){var kp,kq,kr;kp=l.New(m.Map(km,ko.get_Latest()),{$:1,$0:ko.get_Id()});kq={contents:ko.get_Latest()};kr={contents:kp.get_Latest()};ko.Subscribe(function(ks){if(kq.contents!==ks){kr.contents=m.Map(km,ks);return kp.Trigger(kr.contents);}else{return null;}});kp.Subscribe(function(kt){if(kr.contents!==kt){kq.contents=m.Map(kn,kt);return ko.Trigger(kq.contents);}else{return null;}});return kp;}},Stream1:$.Class({Subscribe:function(ku){return S.subscribeTo(this.s,ku);},Trigger:function(kv){return this.s.Trigger(kv);},Trigger1:function(kw){return this.Trigger(kw);},Write:function(kx){var kz=this;return p.New(function(ky){return ky.$==0?kz.Trigger($.New(m,{$:0,$0:kx})):kz.Trigger($.New(m,{$:1,$0:ky.$0}));});},get_Latest:function(){return this.s.Latest.contents.$0;}},{New:function(kA,kB){return $.New(this,l.New1(V.New(kA),kB));},New1:function(kC,kD){var kE;kE=$.New(this,d.New(kD.$==0?(o.next())(null):kD.$0));kE.s=kC;return kE;}}),Submitter:$.Class({Subscribe:function(kF){return this.output.Subscribe(kF);},Trigger:function(){return this.writer.Trigger($.New(m,{$:0,$0:null}));},Trigger1:function(kG){return this.writer.Trigger(kG);},get_Input:function(){return this.input;},get_Latest:function(){return this.output.get_Latest();},get_Output:function(){return this.output;}},{New:function(kH,kI){var kJ;kJ=$.New(this,d.New((o.next())(null)));kJ.input=kH;kJ.output=l.New($.New(m,{$:1,$0:$.New(h,{$:0})}),{$:0});kJ.writer=p.New(function(kK){var kL,kM,kN;kL=[kK,kJ.input.get_Latest()];if(kL[0].$==0){return kL[1].$==0?kJ.output.Trigger($.New(m,{$:0,$0:kL[1].$0})):kJ.output.Trigger($.New(m,{$:1,$0:kL[1].$0}));}else{if(kL[1].$==0){return kJ.output.Trigger($.New(m,{$:1,$0:kL[0].$0}));}else{kM=kL[0].$0;kN=kL[1].$0;return kJ.output.Trigger($.New(m,{$:1,$0:g.append(kM,kN)}));}}});if(kI){kJ.input.Subscribe(function(){var kP;kP=kJ.output.get_Latest();return kP.$==1?kP.$0.$==0?null:kJ.output.Trigger($.New(m,{$:1,$0:$.New(h,{$:0})})):kJ.output.Trigger($.New(m,{$:1,$0:$.New(h,{$:0})}));});}return kJ;}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Piglets);b=$.Safe(a.Choose);c=$.Safe(b.Stream);d=$.Safe(a.Reader);e=$.Safe($$.WebSharper.Collections);f=$.Safe(e.Dictionary);g=$.Safe($$.WebSharper.List);h=$.Safe(g.T);i=$.Safe($$.WebSharper.Enumerator);j=$.Safe($$.WebSharper.Seq);k=$.Safe($$.WebSharper.Operators);l=$.Safe(a.Stream1);m=$.Safe(a.Result);n=$.Safe(a.ConcreteReader);o=$.Safe(a.Id);p=$.Safe(a.ConcreteWriter);q=$.Safe(a.ConstReader);r=$.Safe(a.Disposable);s=$.Safe($$.WebSharper.Html);t=$.Safe(s.Client);u=$.Safe(t.Operators);v=$.Safe(t.Tags);w=$.Safe(t.EventsPervasives);x=$.Safe(a.Controls);y=$.Safe(t.Attr);z=$.Safe($$.WebSharper.Unchecked);A=$.Safe($$.jQuery);B=$.Safe(x.HtmlContainer);C=$.Safe($$.WebSharper.Arrays);D=$.Safe(a.ErrorMessage);E=$.Safe(a.Many);F=$.Safe(E.Stream);G=$.Safe(a.Submitter);H=$.Safe(E.Operations);I=$.Safe(e.ResizeArray);J=$.Safe(I.ResizeArrayProxy);K=$.Safe(E.UnitStream);L=$.Safe(a.Pervasives);M=$.Safe($$.WebSharper.Concurrency);N=$.Safe(a.Piglet1);O=$.Safe(a.Stream);P=$.Safe(a.Piglet);Q=$.Safe(P.Validation);R=$.Safe($$.RegExp);S=$.Safe($$.WebSharper.Util);T=$.Safe($$.IntelliFactory);U=$.Safe(T.Reactive);return V=$.Safe(U.HotStream);});$.OnLoad(function(){$.Inherit(c,d);$.Inherit(n,d);$.Inherit(q,d);$.Inherit(F,d);$.Inherit(F,d);$.Inherit(K,F);$.Inherit(l,d);$.Inherit(G,d);o.next();x.nextId();return;});}());
